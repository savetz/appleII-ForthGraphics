( PACK/UNPACK            <11/ 6/84>140)                                                                                                                                                                   APPLE figure PACK/UNPACK routines               written 11-7-84                                                                                                               by                                    Ken Yee                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ( PACK UNPACK COMPRESS   <11/ 7/84>141) PAGE                                    ." Loading APPLE PACK, UNPACK &" CR     ." COMPRESS routines" CR CR             ." Written 11-7-84 Ken Yee" CR          ." Mod 11-7-84 by Fred Haer" CR CR                                              : PTASK ; 6 ' WIDTH !                   ." : PTASK" CR                                                                  172 LOAD                                173 183 THRU                            195 LOAD                                187 LOAD                                192 LOAD                                                                        CR ." loaded" CR CR                     4 ' WIDTH !                                                                                                                                                                                                                                                                                                                                             ( UNPACK ONLY            <11/ 7/84>142)                                         PAGE                                    ." Loading UNPACK routines only" CR CR  ." Written 11-7-84 Ken Yee" CR          ." Mod 11-7-84 by Fred Haer" CR CR                                              : UTASK ; ." : UTASK" CR                                                        6 ' WIDTH !                             143 LOAD       ( VARIABLES       )      144 LOAD       ( NEXT-BYTE       )      155 LOAD       ( LO-LEVEL UNPACK )      161 LOAD       ( UNPACK          )      192 LOAD       ( DRAW            )      4 ' WIDTH !                                                                     CR CR ." loaded" CR                     ." LOAD DISK 1, SCR 146" CR CR                                                                                                                                                                                                                                                                                  ( VARS FOR UNPACK        <11/ 7/84>143)                                         : CVARIABLE   ( C -- )                     CREATE   0 C, ;                                                              CVARIABLE STARTX   ( TOPMOST   X )      CVARIABLE STARTY   ( LEFTMOST  Y )      CVARIABLE ENDX     ( BOTMOST   X )      CVARIABLE ENDY     ( RIGHTMOST Y )      CVARIABLE CURX     ( TEMPORARY   )      CVARIABLE CURY     ( STORAGE     )      CVARIABLE BVAL     ( BYTE VALUE  )      CVARIABLE COUNTER  ( #REPEATS    )      CVARIABLE ODD      ( ODD LINES?  )                                              : PACKBUF                                 PAD 100 + ;                                                                   141 ^DISK/RAM PICS                         ( STARTING BLOCK FOR PICTURES )                                                                                                                                                                                                                                      ( NEXT-BYTE              <11/ 7/84>144) ( SAME AS ON SCR XXX )                                                          CODE NEXT-BYTE                            CURY LDY,  INY, INY,  ( Y=Y+2 )         ENDY CPY,  ( GREATER THAN ENDY? )       CS IF,                                   0= NOT IF,                               STARTY LDY,   ( YES, Y=START )          ODD LDA,  0= NOT IF,  INY,  THEN,       CURX LDX,  INX, INX,  ( X=X+2 )         ENDX CPX,  ( GREATER THAN ENDX? )       CS IF,  ( YES, CARRY SET=ERROR )         0= NOT IF,                               SEC,  RTS,                             THEN, THEN,                            CURX STX,   ( SAVE X )                THEN, THEN,                             CURY STY, ( SAVE Y )                    CURY LDX, ( GET NEW SCREEN POSITION )   ' $YADDR JSR,                           CLC,   ( WENT TO NEXT LINE O.K. )       RTS,                                  C;                                                                                                      ( BOB'S $YADDR ROUTINE   < 8/24/84>145) -->                                     HEX                                       D0 CONSTANT GBASE                                                                  ( ENTRY: LINE# IN X REG  )              ( EXIT: ADDRESS IN GBASE )         CODE $YADDR                                   TXA,  # C0 AND,  GBASE STA,                .A LSR,  .A LSR,                        GBASE ORA,    GBASE STA,             TXA,  GBASE 1+ STA,  .A ASL,               .A ASL,  .A ASL,                        GBASE 1+ ROL,   .A ASL,                 GBASE 1+ ROL,   .A ASL,                 GBASE ROR,                              GBASE 1+ LDA,   # 1F AND,               # 20 ORA,   GBASE 1+ STA,            RTS, C;                           DECIMAL                                 -->                                                                                                                                                                                                                             ( VARIABLES              < 8/24/84>146) : CVARIABLE   ( C -- )                     CREATE   0 C,   DOES> ;                                                      CVARIABLE STARTX   ( TOPMOST   X )      CVARIABLE STARTY   ( LEFTMOST  Y )      CVARIABLE ENDX     ( BOTMOST   X )      CVARIABLE ENDY     ( RIGHTMOST Y )      CVARIABLE CURX     ( TEMPORARY   )      CVARIABLE CURY     ( STORAGE     )      CVARIABLE BVAL     ( BYTE VALUE  )      CVARIABLE COUNTER  ( #REPEATS    )      CVARIABLE ODD      ( ODD LINES?  )                                                                                      9256 CONSTANT MAXPACK                   CREATE PACKBUF MAXPACK ALLOT                                                    -->                                                                                                                                                                                                                                                                                                             ( NEXT-BYTE              < 8/24/84>147)                                         CODE NEXT-BYTE                            CURY LDY,  INY, INY,  ( Y=Y+2 )         ENDY CPY,  ( GREATER THAN ENDY? )       CS IF,                                   0= NOT IF,                               STARTY LDY,   ( YES, Y=START )          ODD LDA,  0= NOT IF,  INY,  THEN,       CURX LDX,  INX, INX,  ( X=X+2 )         ENDX CPX,  ( GREATER THAN ENDX? )       CS IF,  ( YES, CARRY SET=ERROR )         0= NOT IF,                               SEC,  RTS,                             THEN, THEN,                            CURX STX,   ( SAVE X )                THEN, THEN,                             CURY STY, ( SAVE Y )                    CURY LDX, ( GET NEW SCREEN POSITION )   ' $YADDR JSR,                           CLC,   ( WENT TO NEXT LINE O.K. )       RTS,                                  C;                                                                     ( 12:00)                                                                 ( PUTBYTE PUTONE         < 8/24/84>148)  ( VALUE IN A, BUFFER IN N )            CODE PUTBYTE                              # 0 LDY,                                N )Y STA,                               N INC,    ( INC BUF AREA )              0= IF,  N 1+ INC,  THEN,                RTS,                                  C;                                                                                                                      CODE PUTONE                               BVAL LDA,                               0= IF,   ( 0=SPECIAL CASE )              ' PUTBYTE JSR,                          ' PUTBYTE JSR,                          # 1 LDA,                               THEN,                                   ' PUTBYTE JSR,                          RTS,                                  C;                                                                                                                      -->                            ( 12:00)                                                                 ( PUTPACKED              < 8/24/84>149) CODE PUTPACKED                            # 0 LDA,         ( REPEATERS )          ' PUTBYTE JSR,                          BVAL LDA,                               0= IF,           ( 0=SPECIAL CASE )      # 0 LDA,        ( BYTE=0 )              ' PUTBYTE JSR,                          COUNTER LDA,    ( #REPEATS )            ' PUTBYTE JSR,                         ELSE,            ( ALL OTHERS )          COUNTER LDA,    ( #REPEATS )            ' PUTBYTE JSR,                          BVAL LDA,       ( BYTE )                ' PUTBYTE JSR,                         THEN,                                   RTS,                                  C;                                                                                                                      VARIABLE JUMPADDR                                                               -->                                                                    ( 12:00)                                                                 ( <<PACK>>               < 8/24/84>150) CODE <<PACK>>                             CURX LDY,                               GBASE )Y LDA,                           HERE JUMPADDR ! ( ************** )      BVAL  STA,      ( SAVE LAST BYTE )      # 1 LDA,   COUNTER STA,  ( DEF=1 )      ' NEXT-BYTE JSR,                        CS IF,  ' PUTONE JSR, RTS,  THEN,       CURX LDY,     GBASE )Y LDA,             BVAL CMP,                               0= NOT IF,                               PHA,                                    BVAL LDA,    ' PUTONE JSR,              PLA,  JUMPADDR @ JMP,                  THEN,                                                                                                                 -->                                                                                                                                                                                                                                    ( 12:00)                                                                 ( <<PACK>> CON'T         < 8/24/84>151)                                                                                   BEGIN,                                   COUNTER INC,   ' NEXT-BYTE JSR,         CS IF,  ' PUTPACKED JSR, RTS,  THEN,    CURX LDY,     GBASE )Y LDA,            # 255 LDX,    ( MAX. COUNTER VALUE )     COUNTER CPX,                            0= NOT IF,  BVAL CMP,                     ELSE,   # 1 CPX, ( FORCE NE FLAG )   THEN,                                   0= NOT UNTIL,                           PHA,                                    ' PUTPACKED JSR,                        PLA,                                    JUMPADDR @ JMP,                       C;                                                                                                                                                              -->                                                                                                            ( 12:00)                                                                 ( <TPACK>                < 8/24/84>152)    ( X IN Y REG, Y IN X REG )           CODE <TPACK>                              ENDX CPY,     ( X TOO LARGE? )          CS IF,                                    0= NOT IF,  RTS,                      THEN, THEN,                             ENDY CPX,     ( Y TOO LARGE? )          CS IF,                                    0= NOT IF,  RTS,                      THEN, THEN,                             CURX STY,     CURY STX,                 ' $YADDR JSR,                           ' <<PACK>> JSR,                         RTS,                                  C;                                                                                                                      -->                                                                                                                                                                                                                                    ( 12:00)                                                                 ( <PACK>                 < 8/24/84>153) CODE <PACK>   ( -- BUFPTR )               XSAVE STX,                             # 0 LDA,   ODD STA,                      STARTX LDY,                             STARTY LDX,                             ' <TPACK> JSR,  ( ELINES ECOLS )        STARTX LDY,      INY,                   STARTY LDX,                             ' <TPACK> JSR,  ( ELINES OCOLS )       # 1 LDA,    ODD STA,                     STARTX LDY,                             STARTY LDX,      INX,                   ' <TPACK> JSR,  ( OLINES ECOLS )        STARTX LDY,      INY,                   STARTY LDX,      INX,                   ' <TPACK> JSR,  ( OLINES OCOLS )        N LDA, PHA, N 1+ LDA,                   XSAVE LDX,                              PUSH JMP,                             C;                                                                                                                                                     ( 12:00)                                                                 ( PACKBUF PACK           < 8/24/84>154)                                          ( STARTX ENDX STARTY ENDY -- #BYTES )  : PACK                                     PACKBUF MAXPACK 0 FILL                  DOVER PACKBUF 1+  C!  ( ENDX   )              PACKBUF     C!  ( STARTX )        DDUP  PACKBUF 3 + C!  ( ENDY   )              PACKBUF 2 + C!  ( STARTY )        ENDY   C!  STARTY C!                    ENDX   C!  STARTX C!                    PACKBUF 4 +                               [ ASSEMBLER ] N !                     <PACK>                                  ENDX C@ STARTX C@ - 1+                  ENDY C@ STARTY C@ - 1+ U*               CR D. ." BYTES PACKED INTO "            PACKBUF - DUP                           U. ." BYTES." CR ;                                                                                                                                                                                                                  ( 12:00)                                                                 ( GET-BYTE               < 8/24/84>155)  ( VALUE IS PULLED INTO A FROM N )      CODE GET-BYTE                             # 0 LDY,                                N )Y LDA,                               N INC,                                  0= IF,   N 1+ INC,  THEN,               RTS,                                  C;                                                                                                                      -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ( 12:00)                                                                 ( <<UNPACK>>             < 8/24/84>156) CODE <<UNPACK>>                           BEGIN,                                   # 1 LDX,        ' GET-BYTE JSR,         # 0 CMP,                                0= IF,     ( REPEATERS )                 ' GET-BYTE JSR,   TAX,                  # 0 CPX, 0= IF,    ( BYTE=0 )            ' GET-BYTE JSR,  TAX,                   # 0 LDA,                               ELSE,                                    ' GET-BYTE JSR,                        THEN,                                  THEN,   BVAL STA,    COUNTER STX,       BEGIN,      ( LOOP X BYTES )             BVAL LDA,                               CURX LDY,       GBASE )Y STA,           ' NEXT-BYTE JSR,                        CS IF,   RTS,  THEN,                   COUNTER DEC, 0= UNTIL,                 0= NOT UNTIL,   ( FORCED JUMP )       C;  -->                                                                                                        ( 12:00)                                                                 ( <TUNPACK>              < 8/24/84>157)  ( Y IN X REG, X IN Y REG )             CODE <TUNPACK>                            ENDX CPY,                               CS IF,                                    0= NOT IF,    RTS,                    THEN, THEN,                             ENDY CPX,                               CS IF,                                    0= NOT IF,    RTS,                    THEN, THEN,                             CURX STY,       CURY STX,               ' $YADDR JSR,                           ' <<UNPACK>> JSR,                       RTS,                                  C;                                                                                                                      -->                                                                                                                                                                                                                                    ( 12:00)                                                                 ( <UNPACK>               < 8/24/84>158) CODE <UNPACK>                             XSAVE STX,                             # 0 LDA,    ODD STA,                     STARTX LDY,                             STARTY LDX,                             ' <TUNPACK> JSR,  ( ELINES ECOLS )      STARTX LDY,    INY,                     STARTY LDX,                             ' <TUNPACK> JSR,  ( ELINES OCOLS )     # 1 LDA,    ODD STA,                     STARTX LDY,                             STARTY LDX,    INX,                     ' <TUNPACK> JSR,  ( OLINES ECOLS )      STARTX LDY,    INY,                     STARTY LDX,    INX,                     ' <TUNPACK> JSR,  ( OLINES OCOLS )      XSAVE LDX,                              NEXT JMP,                             C;                                                                                                                                                                                             ( 12:00)                                                                 ( UNPACK                 < 8/24/84>159)                                         : UNPACK ( ADDR 0 / ADDR X Y 1 -- )        IF                                        ROT DUP DUP                             1+ C@ SWAP C@ - >R   ( XDIFF )          2+ DUP DUP                              1+ C@ SWAP C@ - >R   ( YDIFF )          2+ [ ASSEMBLER ] N !                    R> OVER STARTY C!                        + ENDY C!                              R> OVER STARTX C!                        + ENDX C!                            ELSE                                      DUP C@ STARTX C!                        1+ DUP C@ ENDX   C!                     1+ DUP C@ STARTY C!                     1+ DUP C@ ENDY C!                       1+ N !                                THEN   <UNPACK> ;                                                                                                                                                                           ( 12:00)                                                                 ( PACKBUF PACK           < 8/24/84>160) 0 CONSTANT ?PRLIST                       ( STARTX ENDX STARTY ENDY -- #BYTES )  : PACK                                     PACKBUF MAXPACK 0 FILL                  DOVER SWAP - PACKBUF   C!  ( WIDTH )    DDUP SWAP - PACKBUF 1+ C! ( HEIGHT )    ENDY   C!  STARTY C!                    ENDX   C!  STARTX C!                    STARTX C@ 1 AND IF                        PACKBUF C@ 128 OR PACKBUF C!          THEN                                    PACKBUF 2 +                               [ ASSEMBLER ] N !                     <PACK>                                  ?PRLIST IF 1 PR# THEN                   ENDX C@ STARTX C@ - 1+                  ENDY C@ STARTY C@ - 1+ U*               CR D. ." BYTES PACKED INTO "            PACKBUF - DUP                           U. ." BYTES." CR                        ?PRLIST IF 1 PR# THEN ;                                                                                                                                                              ( UNPACK                 < 8/24/84>161)                                         : UNPACK ( ADDR X Y -- )                   OVER 1 AND  ( ODD )                     PACKBUF C@ 128 AND 0=  ( EVEN OLD )     AND IF  ( NOT BOTH SAME )                 CR ." WRONG SCREEN COLUMN..."           CR BEEP BEEP                          THEN                                    ROT DUP                                 C@ 127 AND >R  ( XDIFF )                1+ DUP                                  C@ >R   ( YDIFF )                       1+ [ ASSEMBLER ] N !                    R> OVER STARTY C!                        + ENDY C!                              R> OVER STARTX C!                        + ENDX C!                              <UNPACK> ;                                                                                                                                                                                                                                                                                                   (                        < 8/24/84>162)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>163)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 ( YADDR                  < 8/24/84>164)                                         CODE YADDR   ( -- ADDR )                  XSAVE STX,                              CURY LDX,                               ' $YADDR JSR,                           GBASE LDA,   PHA,                       GBASE 1+ LDA,                           XSAVE LDX,                              PUSH JMP,                             C;                                                                                                                                                              -->                                                                                                                                                                                                                                                                                                                                                                                                    ( 12:00)                                                                 ( NEXT-BYTE              < 8/24/84>165) VARIABLE ADDR                           VARIABLE BUFADR                                                                 : NEXT-BYTE   ( -- F )                     CURY C@ 2+ DUP                          ENDY C@ > IF                              DROP STARTY C@ ODD C@ +                 CURX C@ 2+ DUP                          ENDX C@ > IF                              DDROP 1 EXIT THEN                     CURX C!                               THEN                                    CURY C!                                 YADDR ADDR ! 0 ;                                                                                                     -->                                                                                                                                                                                                                                                                            ( 12:00)                                                                 ( GET-BYTE               < 8/24/84>166)                                         : GET-BYTE   ( -- C )                      BUFADR @ C@                             1 BUFADR +!                           ;                                      -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ( 12:00)                                                                 ( <<UNPACK>>             < 8/24/84>167)                                         : <<UNPACK>>   ( -- )                    BEGIN                                     GET-BYTE                                ?DUP 0= IF                                GET-BYTE GET-BYTE  ( CNTR BYTE )        OVER IF  SWAP  THEN                   ELSE  1  THEN    ( BYTE COUNTER )       0 ROT ROT                               0 DO                                      I 0= IF  ADDR @ CURX C@ + .  THEN       DUP ADDR @ CURX C@ + C!                 NEXT-BYTE   IF                            LEAVE  SWAP 1+ SWAP                    THEN                                 LOOP                                    DROP IF EXIT THEN                     AGAIN ;                                                                        -->                                                                                                                                                    ( 12:00)                                                                 ( <TUNPACK>              < 8/24/84>168)                                         : <TUNPACK>                                CURX C@ ENDX C@ >                       CURY C@ ENDY C@ >  OR                   IF EXIT  THEN                           YADDR ADDR !                            <<UNPACK>> ;                                                                 -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ( 12:00)                                                                 ( <UNPACK>               < 8/24/84>169)                                         : <UNPACK>                                 0 ODD C!                                STARTX C@ CURX C!                       STARTY C@ CURY C!                       <TUNPACK> CR                            STARTX C@ 1+ CURX C!                    STARTY C@ CURY C!                       <TUNPACK> CR                            1 ODD C!                                STARTX C@ CURX C!                       STARTY C@ 1+ CURY C!                    <TUNPACK> CR                            STARTX C@ 1+ CURX C!                    STARTY C@ 1+ CURY C!                    <TUNPACK> ;                                                                                                          -->                                                                                                                                                                                            ( 12:00)                                                                 ( UNPACK                 < 8/24/84>170)                                         : UNPACK ( ADDR 0 / ADDR X Y 1 -- )        IF                                        ROT DUP DUP                             1+ C@ SWAP C@ - >R   ( XDIFF )          2+ DUP DUP                              1+ C@ SWAP C@ - >R   ( YDIFF )          2+ BUFADR !                             R> OVER STARTY C!                        + ENDY C!                              R> OVER STARTX C!                        + ENDX C!                            ELSE                                      DUP C@ STARTX C!                        1+ DUP C@ ENDX   C!                     1+ DUP C@ STARTY C!                     1+ DUP C@ ENDY C!                       1+ BUFADR !                           THEN   <UNPACK> ;                                                                                                                                                                           ( 12:00)                                                                 ( 4 BYTE <UN>PACK LOADER < 8/24/84>171)                                         145 LOAD       ( COMMON ROUTINES )      148 LOAD       ( LO-LEVEL PACK   )      154 LOAD       ( PACK            )      155 LOAD       ( LO-LEVEL UNPACK )      159 LOAD       ( UNPACK          )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ( 12:00)                                                                 ( 2 BYTE <UN>PACK LOADER < 8/24/84>172)                                         145 LOAD       ( COMMON ROUTINES )      148 LOAD       ( LO-LEVEL PACK   )      160 LOAD       ( PACK            )      155 LOAD       ( LO-LEVEL UNPACK )      161 LOAD       ( UNPACK          )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ( 12:00)                                                                 ( BLK-START BLK#         < 8/24/84>173) ( BLK-START is the block number which ) ( all disk-ram operations are relative) ( to )                                                                          0 CONSTANT BLK-START                                                            ( use: addr BLK# )                      ( returns offset and block number of )  ( addr relative to BLK-START )                                                  : BLK# ( addr -- offset blk# ; )          0 1024 U/MOD BLK-START + ;                                                                                                                                                                                                                                                                                                                                                                                                                                                           ( 12:00)                                                                 ( ^DISK/RAM              < 8/24/84>174) ( use: blk ^DISK/RAM name )             ( creates a word, name, which when )    ( executed will set BLK-START to blk )                                          : ^DISK/RAM  ( blk# -- * ; )              CREATE                                    ,                                      DOES>                                    @ ' BLK-START ! ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ( 12:00)                                                                 ( DISK LOCATIONS         < 8/24/84>175)                                         ( \\\ ALTER FOR FINAL PROGRAM /// / )                                               1 ^DISK/RAM CAT                     (     \ category starting block )                                                   9 ^DISK/RAM SUBCAT                  (     \ subcategory starting block )                                               18 ^DISK/RAM DESC                    (     \ final data desc and links )                                                47 ^DISK/RAM DATA                    (     \ final data data )                                                                                                                                                                                                                                                                                                                                                                              ( 12:00)                                                                 ( @DISK                  < 8/24/84>176) ( use: adr @DISK )                      ( fetches a value from disk relative t) ( the value of BLK-START )                                                      : @DISK ( adr )                           BLK#                                    OVER 1023 =  ( last byte of block? )    IF DUP ROT ROT BLOCK + C@                SWAP 1+ BLOCK C@ 256 * +               ELSE BLOCK + @                          THEN ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ( 12:00)                                                                 ( !DISK                  < 8/24/84>177) ( use: val adr @DISK )                  ( stores val at disk address adr )      ( relative to BLK-START )                                                       : !DISK ( adr )                           BLK#                                    OVER 1023 =  ( last byte of block? )    IF DUP ROT ROT BLOCK +                    3 PICK 255 AND SWAP C! UPDATE           1+ BLOCK SWAP 256 / SWAP C! UPDATE    ELSE BLOCK + ! UPDATE                   THEN ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ( 12:00)                                                                 ( C@DISK C!DISK          < 8/24/84>178) ( C@ and C! to DISK relative to )       ( BLK-START )                                                                   : C@DISK ( adr -- val ; )                 BLK# BLOCK + C@ ;                                                             : C!DISK ( val adr -- * ; )               BLK# BLOCK + C! UPDATE ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( 12:00)                                                                 ( >DISK DISK< notes      < 8/24/84>179)                                         EXIT -------                                                                     use: mem-adr disk-adr cnt >DISK          moves cnt bytes from memory address     mem-adr to disk address disk-adr        (disk-adr is relative to BLK-START)                                            use: disk-adr mem-adr cnt DISK>          reads count bytes from disk-adr         ( relative to BLK-START ) to            mem-adr, same restrictions as >DISK                                            >DISK1 & DISK>1 are primitives for      >DISK & DISK>                                                                   Both words can move up to 64K                                                                                                                                                                                                                                                 ( 12:00)                                                                 ( >DISK1 >DISK           < 8/24/84>180)                                         : >DISK1 ( ^mem ofs blk# cnt -- ^mem )    ( update ^mem to point to the next )    >R BLOCK + ( dest addr )                OVER ( source addr )                    SWAP I BMOVE UPDATE                     R> + ; ( inc the ^mem )                                                       : >DISK ( ^mem ^disk cnt -- * ; )         >R BLK#                                 BEGIN                                   OVER I + 1023 > ( cross blks? )         WHILE ( ^mem bofs blk# || cnt )           1024 3 PICK - ( partial count )         R> OVER - >R  ( remaining count )       OVER >R ( save block # )                >DISK1 ( first half )                   0 R> 1+ ( ^mem bofs blk# ||cnt )      REPEAT R> >DISK1                        DROP ( ^mem)                          ;                                                                                                              ( 12:00)                                                                 ( DISK>1 DISK>           < 8/24/84>181)                                         : DISK>1 ( ^mem ofs blk# cnt -- ^mem )    ( update ^mem to point to the next )    >R BLOCK + ( source addr )              OVER ( dest addr )                      I BMOVE                                 R> + ; ( inc the ^mem )                                                       : DISK> ( ^disk ^mem cnt -- * ; )         >R SWAP BLK#                            BEGIN                                   OVER I + 1023 > ( cross blks? )         WHILE      ( ^mem bofs blk# || cnt )      1024 3 PICK - ( partial count )         R> OVER - >R  ( remaining count )       OVER >R ( get block # )                 DISK>1 ( first half )                   0 R> 1+ (  ^mem bofs blk# ||cnt )     REPEAT R> DISK>1                        DROP ( ^mem)                          ;                                                                                                              ( 12:00)                                                                 ( DISKTYPE               < 8/24/84>182) ( type a string from the disk buffer )  ( fetches the count from the string )                                           : DISKTYPE ( addr -- * ; )                DUP 1+ SWAP C@DISK                      DUP 0>                                  IF OVER + SWAP                           DO I C@DISK EMIT 1                      /LOOP                                  ELSE DDROP THEN ;                                                             --> ******                                                                                                              : GDTYPE ( addr -- * ; )                  DUP 1+ SWAP C@DISK                      DUP 0>                                  IF OVER + SWAP                           DO I C@DISK GEMIT 1                     /LOOP                                  ELSE DDROP THEN ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ( $= IN CODE             < 8/24/84>184)                                         CODE $=   ( $A $B -- T/F )                # 2 LDA,    SETUP  JSR,               ( CHECK COUNTS HERE LATER IF NEEDED )     N )Y LDA,      ( ACNT )                 N 4 + STA,                              N 2+ )Y LDA,   ( BCNT )                 N 5 + STA,                            ( CHECK FOR NULL STRINGS? )               N )Y AND,                                                                                                             -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ( $= IN CODE             < 8/24/84>185)  0= NOT IF,                               INY,        ( PAST COUNT )              BEGIN,                                      N )Y LDA,                               N 2+ )Y CMP,                            0= NOT IF,  ( STRINGS NOT EQUAL )        ( INX, INX, ) ( DROP TOP )                # 0 LDA,  PHA,                          PUSH JMP,                            THEN,                                   N INC,                                  0= IF,  N 1+ INC,  THEN,                N 2+ INC,                               0= IF,  N 3 + INC,  THEN,               N 4 + DEC,                            0= NOT IF,  N 5 + DEC,   THEN,        0= UNTIL,                              THEN,                                  ( INX, INX, )   ( DROP TOP OF STACK )     # 1 LDA,  PHA,  # 0 LDA,                PUSH JMP,                             C;                                                                     ( 12:00)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( COMPRESSION            < 8/24/84>187)                                         0 CONSTANT ?ALL    ( TOVARS )           ( 0 CONSTANT ?PRLIST )                  ( MOVED TO PACK BY FAH )                                                        128 CONSTANT 128                        63  CONSTANT MAX-PIC                     ( ASSUMES PICTURE DISK IN DRIVE 1   )   ( AND COMPRESSION TO DRIVE 2        )  141 ^DISK/RAM PICS                                                              --> ********* STRUCTURE ********           #PICS         OFFSETS                  1 WORD       MAX-PICS*2 BYTES                                                 CURRENT TOTAL: 128 BYTES                                                                                                                                                                                                                                                                                                                                                                        ( PUTPACKD               < 8/24/84>188)                                         : PUTPACKD  ( #BYTES -- )                ( PUTS PICTURE IN NEXT AVAILABLE    )   ( ENTRY OF DISK BUT DOES NOT CHECK  )   ( FOR MAXIMUM # OF PICS             )     0 @DISK 1+  ( INC # OF ENTRIES )        DUP 0 !DISK   ( #BYTES N )              DUP 2* @DISK  ( #BYTES N OFFSET )       >R            ( #BYTES N )             ( STORE NEW OFFSET )                     DDUP          ( 2TIMES EARLIER )        1+ 2* ( ADDR )  R@ ROT + SWAP           !DISK         ( #BYTES N )              DROP                                    PACKBUF R> ROT                          >DISK FLUSH ;                                                                -->                                                                                                                                                                                                                                                                                                             ( <<COMPRESS>>           < 8/24/84>189)                                         : <<COMPRESS>>   ( -- )                  ( INNER PART OF COMPRESS )             PAGE 1HG 0 21 XYTAB  ^NAME COUNT TYPE      ?ALL NOT IF   ( NOT PACK ALL )            ." :  PACK IT " (Y/N)?                 ELSE  1  THEN                          IF                                        VXMIN 7 / VXMAX 7 /                     VYMIN VYMAX PACK   ( SQUASH IT )        0 @DISK MAX-PIC 1- < IF                   0 22 XYTAB ?PRLIST                      IF 1 PR# THEN                           ^NAME COUNT TYPE                        ."  IS PIC#" 0 @DISK 1+ . CR            ?PRLIST IF 0 PR# THEN PUTPACKD         ELSE   DROP ." TOO MANY" CR               ." PRESS ANY KEY TO CONTINUE"           KEY DROP   ABORT                     THEN                                  THEN ;                               -->                                                                                                                                             ( <COMPRESS>             < 8/24/84>190)                                         : <COMPRESS>   ( -- )                    ( LOOP THAT DOES COMPRESSION )            GET-DIR 0 !FIG# 0 20 XYTAB              BEGIN  +FIG                              @FIG# 0= NOT WHILE                        ^NAME C@ IF                               GETPAR? IF                                HG CLS                                  @BLOCK# @SIZE                           <FETCH-PICTURE>                         VXMIN VYMIN REST.VP                     <<COMPRESS>>                          THEN                                  THEN                                 REPEAT ;                                                                     -->                                                                                                                                                                                                                                                                                                             ( INITCOMPRESS COMPRESS  < 8/24/84>191)                                         : INITCOMPRESS   ( -- )                  ( SET OPTIONS )                           0 PR#                                   ." PACK ALL PICTURES "                  (Y/N)?  ' ?ALL !   CR                   ." APPEND <N=ERASE OLD> "               (Y/N)? 0= IF                              128 2 !DISK                             0 0 !DISK FLUSH  THEN   CR            ." PRINT ON PRINTER "                   (Y/N)?  ' ?PRLIST ! ;                                                                                                : COMPRESS   ( -- )                        PICS                                    INITCOMPRESS                            <COMPRESS> ;                                                                                                                                                                                                                                                                                                 ( GETPACKED DRAW         < 8/24/84>192)                                         : GETPACKED  ( PIC# -- * )               ( PACKED PIC INTO BUFFER )                DUP 2* @DISK DUP   ( N ADDR<2> )        ROT 1+ 2* @DISK                         - ABS              ( ADDR COUNT )       PACKBUF SWAP                            DISK> ;                                                                      : DRAW   ( X Y N -- * )                    PICS                                    GETPACKED                               PACKBUF ROT ROT UNPACK ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( @WIDTH ^HOLD VPWIDTH   < 8/24/84>195) 0   CONSTANT VXMIN   0  CONSTANT VYMIN  279 CONSTANT VXMAX  191 CONSTANT VYMAX                                          : @WIDTH   ( -- N )                     (  PACKBUF @ 7 /MOD SWAP 0= NOT + ; )      PACKBUF @ 6 + 7 / ;                                                          : @HEIGHT  ( -- N )                        PACKBUF 2+ @ ;                                                               : ^HOLD    ( I -- ADDR )                   @WIDTH * PACKBUF + 4 + ;             : ^HIRES   ( XORG YORG -- ADDR )           YADDR SWAP 7/ + ;                                                            : VPWIDTH  VXMAX 1+ VXMIN - ;           : VPHEIGHT VYMAX 1+ VYMIN - ;           -->                                                                                                                                                                                                                                                                                                             ( RING BUFFER PRIMITIVES < 8/24/84>196)                                         : REST.VP   ( X Y -- )                   ( VXMAX 1+ 3 PICK - 7/ )                  @WIDTH ( MIN )                          VPHEIGHT @HEIGHT                        MIN 0 DO                                  3 PICK 3 PICK I + ^HIRES                I ^HOLD                                 SWAP 3 PICK BMOVE                     LOOP DDROP DROP ;                                                            8192 CONSTANT 8K                        1024 CONSTANT 1K                                                                : >BLK ( ^RING-BUFFER -- ^CURRENT )         DUP @                ( FETCH SIZE )     OVER 4 + @ *                                      ( FETCH CURRENT ENTRY # )     6 +              ( COMPUTE OFFSET )     + ;                    ( ^CURRENT )                                                                                 -->                                                                                                     ( RING BUFFER PRIMITIVES < 8/24/84>197)                                         : +BLK ( ^RING-BUFFER -- )                  1 OVER 4 + +! ( INCREMENT CURRENT )     DUP 2+ @                                       ( FETCH TOTAL # OF ENTRIES )     OVER 4 + @                                         ( FETCH CURRENT BLOCK# )     < IF 0 SWAP 4 + !                       ELSE DROP THEN ;                                                            : -BLK -1 OVER 4 + +!                         DUP 4 + @                               0< IF DUP 2+ @ SWAP 4 + !               ELSE  DROP THEN ;                                                         : !BLK# ( N ^RING-BUFFER -- )                 DDUP 2+ @ >                             IF DDROP ELSE 4 + ! THEN ;                                                : @BLK# ( ^RING-BUFFER -- N )                 4 + @ ;                                                                   -->                                                                                                     ( RING BUFFER PRIMITIVES < 8/24/84>198)                                         ( BUFFER_ADDRESS -- MAX_BLOCK_NUMBER )  : @MAX-BLK# 2+ @ ;                                                              ( N BUFFER_ADDRESS -- * )               : !MAX-BLK# 2+ ! ;                                                              ( N BUFFER_ADDRESS -- * )               : +MAX-BLK# 2+ +! ;                                                             ( N BUFFER_ADDRESS -- BLOCK_ADDRESS )   : >BLKN SWAP OVER @ * + 6 + ;                                                   -->                                                                                                                                                                                                                                                                                                                                                                                                    ( 12:00)                                                                 (                        < 8/24/84>199) -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ( 12:00)                                                                 ( DIRECTORY:  FORMAT     < 8/24/84>200) --> *******                              THE DIRECTORY OCCUPIES                  BLOCK ZERO OF THE DATA DISK,                                                   DIRECTORY + 0 : NEXT AVAILABLE SCREEN                   FOR PICTURE STORAGE     DIRECTORY + 2 : NEXT AVAILABLE BYTE                     ( CURRENTLY, ALWAYS 0 ) DIRECTORY + 4 : START OF RING BUFFER                                            ENTRY +  0 : NAME OF OBJECT                          ( 1 BYTE COUNT, )                       ( 12 BYTES ALFA )          ENTRY + 13 : SCREEN #                   ENTRY + 15 : LENGTH IN SCREENS OF DATA  ENTRY + 17 : VXMIN                      ENTRY + 19 : VYMIN                      ENTRY + 21 : VXMAX                      ENTRY + 23 : VYMAX                      ENTRY + 25 : FORMAT ( 1 BYTE )                                                                                                                                                                                                  ( DIR-SIZE FIG-SIZE ETC. < 8/24/84>201)                                          1024  CONSTANT  DIR-SIZE                  26  CONSTANT  FIG-SIZE                  38  CONSTANT  MAX-FIGS                                                       -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( DIRECTORY FIG-LIST     < 8/24/84>202)                                         CREATE DIRECTORY 2048 ALLOT             DIRECTORY 4 + CONSTANT FIG-LIST                                                                                                                                                                         --> *****                                                                       ( MUST REMEMBER TO TURN ON 16K RAM !! )                                         HEX                                     0F000 CONSTANT DIRECTORY                0F004 CONSTANT FIG-LIST                 DECIMAL                                                                                                                                                                                                                                                                                                                                                                                                                                 ( INIT-DIR               < 8/24/84>203)                                         : INIT-DIR                                 DIRECTORY DIR-SIZE 0 FILL                          ( CLEAR DIRECTORY SPACE )                                            1 DIRECTORY !                                    ( DIRECTORY USES 1 SCREEN )                                            0 DIRECTORY 2+ !                                     ( NEXT AVAILABLE BYTE )                                            FIG-SIZE FIG-LIST !                                   ( SIZE OF EACH ENTRY )                                            MAX-FIGS FIG-LIST 2+ !                                 ( NUMBER OF ENTRIES )                                            0 FIG-LIST 4 + !   ( CURRENT ENTRY )    ;                                                                            -->                                                                                                                                                                                     ( GET-DIR PUT-DIR        < 8/24/84>204)                                         : PUT-DIR                                  DIRECTORY                               0 BLOCK                                 1K BMOVE                                UPDATE FLUSH ;                                                                                                       : GET-DIR                                   INIT-DIR ( CLEAR DIRECTORY SPACE )      EMPTY-BUFFERS     ( FORCE A READ )      0 BLOCK                                 DIRECTORY                               1K BMOVE ;                                                                  -->                                                                                                                                                                                                                                                                                                                                                                                             ( !NEXTBLOCK ETC.        < 8/24/84>205)                                         : !NEXTBLOCK ( N -- ) DIRECTORY 0 + ! ;                                         : @NEXTBLOCK ( -- N ) DIRECTORY 0 + @ ;                                         -->                                                                             : !NEXTBYTE  ( N -- ) DIRECTORY 2 + ! ;                                         : @NEXTBYTE  ( -- N ) DIRECTORY 2 + @ ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 ( FIG-LIST ACCESS        < 8/24/84>206)                                         : ^ENTRYN ( N -- ADDR )                             FIG-LIST >BLKN ;            : ^ENTRY    FIG-LIST >BLK ;             : ^NAME     ^ENTRY   0 + ;              : ^BLOCK#   ^ENTRY  13 + ;              : ^VXMIN    ^ENTRY  15 + ;              : ^VYMIN    ^ENTRY  17 + ;              : ^VXMAX    ^ENTRY  19 + ;              : ^VYMAX    ^ENTRY  21 + ;              : ^SIZE     ^ENTRY  23 + ;              : ^FORMAT   ^ENTRY  25 + ; ( 1 BYTE )                                           -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( FIG-LIST ACCESS        < 8/24/84>207)                                         : @XYMIN ^VXMIN @ ^VYMIN @ ;            : @XYMAX ^VXMAX @ ^VYMAX @ ;                                                    : !FIG# ( N -- )  FIG-LIST !BLK# ;      : @FIG# ( -- N )  FIG-LIST @BLK# ;      : +FIG   ( -- )   FIG-LIST +BLK ;       : !NFIGS ( N -- ) FIG-LIST !MAX-BLK# ;  : @NFIGS ( -- N ) FIG-LIST @MAX-BLK# ;  : +NFIGS ( -- )   @NFIGS 1+ @FIG# MAX                     MAX-FIGS MIN !NFIGS ;                                         -->  ******                                                                     : @FORMAT ( -- N ) ^FORMAT C@ ;         : !FORMAT ( N -- ) ^FORMAT C! ;                                                                                                                                                                                                                                                                                        ( 12:00)                                                                 ( @FORMAT !FORMAT        < 8/24/84>208)                                         : @FORMAT ( -- N )                         FIG-LIST @ FIG-SIZE =                   IF   ^FORMAT C@                         ELSE 0 THEN ;                                                                : !FORMAT ( N -- )                         FIG-LIST @ FIG-SIZE =                   IF ^FORMAT C! ELSE DROP THEN ;                                               --> *****                                                                       FORMATS:                                   0 = DISK CREATED UNDER PREVIOUS             VERSIONS OF PROGRAM.                    PICTURE IN STANDARD FORMAT.                                                 1 = PICTURE IN STANDARD FORMAT.                                                 OTHER FORMATS NOT YET DEFINED.                                                                                                                      ( 12:00)                                                                 ( FIND-BLOCK             < 8/24/84>209) ( FIND NEXT FREE BLOCK )                                                        ( -- LEAVES NUMBER OF FIRST )           (    AVAILABLE BLOCK ON STACK )         ( -- 0 MEANS BUFFER IS FULL )                                                   : FIND-BLOCK                               0 !FIG#                                 BEGIN +FIG                                   ^NAME C@                                127 AND 0=                              @FIG# 0= OR                        UNTIL                                   @FIG# 0=                                IF   +NFIGS                                  @NFIGS !FIG#                       THEN                                    @FIG# ;                                                                      -->                                                                                                                                                    ( 12:00)                                                                 ( PIC-SIZE NBLOCKS       < 8/24/84>210)                                         ( COMPUTE SIZE OF PICTURE IN BYTES )    ( AND IN DISK BLOCKS )                                                          : PIC-SIZE ( -- NBYTES )                   @WIDTH                                  @HEIGHT * 4 + ;                                                              : NBLOCKS ( -- NBLOCKS )                  PIC-SIZE 1K /MOD SWAP 0= 0= + ;                                               -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ( 12:00)                                                                 ( !SIZE !BLOCK# ETC.     < 8/24/84>211)                                         : !SIZE ( -- ) NBLOCKS ^SIZE ! ;        : @SIZE ( -- N ) ^SIZE @ ;              : !BLOCK# ( -- ) @NEXTBLOCK ^BLOCK# ! ; : @BLOCK# ( -- N ) ^BLOCK# @ ;                                                  : +NEXTBLOCK ( -- )                           @NEXTBLOCK NBLOCKS + !NEXTBLOCK ;                                         : !XYMIN                                     VXMIN ^VXMIN ! VYMIN ^VYMIN ! ;                                            : !XYMAX                                     VXMAX ^VXMAX ! VYMAX ^VYMAX ! ;                                            -->                                                                                                                                                                                                                                                                                                                    ( 12:00)                                                                 (                        < 8/24/84>212)                                         : GETPAR?   ( -- 0/1 )                     @FORMAT 1 = IF                            @XYMIN ' VYMIN ! ' VXMIN !              @XYMAX ' VYMAX ! ' VXMAX !              1                                     ELSE  0  THEN ;                                                              : <FETCH-PICTURE>   ( SCR# #BLOCKS -- )    DUP 0= IF    DDROP                       ELSE   EMPTY-BUFFERS                      ( #BLOCKS ) 0 DO                          DUP I + BLOCK                           PACKBUF I 1K * +                        1K BMOVE                              LOOP DROP                            THEN ;                                                                                                                                                                                                                                                                      ( 12:00)                                                                 (                        < 8/24/84>213)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>214)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>215)                                         : PTASK ; 6 ' WIDTH !                                                           PAGE ." Loading PACK/UNPACK routines"   CR ." 11-7-84   Ken Yee" CR CR                                                  172 LOAD                                173 183 THRU                            195 LOAD                                187 LOAD                                192 LOAD                                                                        CR ." PACK/UNPACK loaded" CR            4 ' WIDTH !                                                                                                                                                                                                                                                                                                                                                                                                                                                                     (                        < 8/24/84>216)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>217)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>218)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>219)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>220)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>221)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                 (                        < 8/24/84>222)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ( 12:00)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( DIRECTORY              <10/26/84>240)                                         ( 141 LOAD         EPSON 4LST        )  ( 171 LOAD  <UN>PACK W/4 BYTE HEADER )  ( 172 LOAD  <UN>PACK W/2 BYTE HEADER )  ( 164 LOAD   HIGH LEVEL UNPACK       )  ( 173 LOAD   FRED'S DISK-IO WORDS    )  ( 184 LOAD   $= IN ASSEMBLER         )  ( 187 LOAD   COMPRESS DISK ROUTINES  )  ( 192 LOAD   DRAW PACKED PICS        )  ( 195 LOAD   RING BUFFER STUFF       )  ( 215 LOAD   LOAD PACKER             )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ( 12:00)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 