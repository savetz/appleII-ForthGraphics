( GRAPHICS VERSION 3     <10/16/84>140) EXIT                                                                            NUMBER OF COLORS AVAILABLE DEPENDS      ON COLORTAB; ESSENTIALLY UNLIMITED.                                             GRAPHICS MODES:                         0 = INVERT BITS ON SCREEN               1 = SET BITS                            2 = CLEAR BITS                          3 = INVERSE PATTERN TO SCREEN           4 = EOR PATTERN WITH SCREEN             5 = PUT PATTERN ON SCREEN                                                       HPLOT WILL WRAP AROUND IF PLOTTING AT   X = 279.                                                                        ADDRESS OF ASCII TABLE IS FOUND         IN CONSTANT ">ASCTAB".                                                          V.4 : PATBUF REDUCED TO 40 BYTES,       FROM 320; CHARBUF MAPPED ONTO PATBUF;   PATTERN EXPANDED LINE BY LINE,          AS NEEDED.                     (  RLP )                                                                 ( HIGH-LEVEL WORDS       <10/12/84>141) --> EXIT                                HCOLOR ( N -- )                            SET CURRENT COLOR                    SETMODE ( N -- )                           SET GRAPHICS MODE; SEE SCR 140       SETENDPTS ( X1 X2 -- )                     SET CURRENT X END POINTS             HLINE ( Y -- )                             DRAW HORIZ LINE WITHIN CURRENT          X END POINTS                         VLINE ( Y1 Y2 -- )                         DRAW VERTICAL LINE (OR BAR)             WITHIN CURRENT X END POINTS          HPLOT ( X Y -- )                           PLOT POINT AT [X,Y]                     (DOES "SETENDPTS")                   LINE ( X1 Y1 X2 Y2 -- )                    DRAW LINE FROM [X1,Y1] TO [X2,Y2]    CDRAW ( ADDR X Y -- )                      DRAW CHARACTER AT [X,Y]              <GEMIT> ( CH -- )                          DRAW CHARACTER AT [GX,GY]                                           (  RLP )                                                                 ( LOAD BLOCK             <11/ 1/84>142) PAGE                                    CR    ." APPLE GRAPHICS VERSION 4.2 "         ." 01/31/84 "                     CR    ." ROBERT L. PYRON "              CR    ." (C) 1984, "                          ." PRENTICE ASSOCIATES, INC. "    CR CR ." SEE NOTES ON SCREENS "               ." 140 AND 141 "                  CR                                      ( 150 169 THRU ( BOB'S STUFF )          ( 170 174 THRU ( PLISTS SHOW CRUNCH )     CR  180 LOAD ( YADDR, 7/MOD, HLINE )    CR  210 LOAD ( HPLOT )                  CR  220 LOAD ( CHAR DRAW V.2 )          CR  230 LOAD ( LINE DRAW )            ( CR  240 LOAD ( AFILL )                  CR  260 LOAD ( GEXPECT, GEMIT, ETC. ) ( CR  270 LOAD ( )                        CR  275 LOAD ( GET 9-PT FONT )                                                CR CR ." GRAPHICS PACKAGE LOADED"       CR 2BEEP EXIT                                                          (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( .S INDEX               <10/24/84>147)                                         : INDEX CR 1+ SWAP                              DO  CR EPRINT @                             IF    I 3 .R SPACE                            0 I .LINE                         ELSE  0 I .LINE                               XY@ SWAP DROP                           35 SWAP XYTAB                           I 3 .R                            THEN                                    PAUSE ?TERMINAL                         IF LEAVE THEN                       LOOP ;                                                                                                                                                                                                                                                                                                                                                                                                                                 (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( .PAI                   < 9/30/84>149)                                         : .PAI   ."  PAI " ;                    : .RLP   ."  RLP " ;                    : .SALLY ." SALLY" ;                    : .FRED  ." FRED " ;                    : .ELLA  ." ELLA " ;                    : .LARRY ." LARRY" ;                                                            : =PAI   ' .PAI   ' .HR:MIN 10 CMOVE ;  : =RLP   ' .RLP   ' .HR:MIN 10 CMOVE ;  : =SALLY ' .SALLY ' .HR:MIN 10 CMOVE ;  : =FRED  ' .FRED  ' .HR:MIN 10 CMOVE ;  : =ELLA  ' .ELLA  ' .HR:MIN 10 CMOVE ;  : =LARRY ' .LARRY ' .HR:MIN 10 CMOVE ;                                          =RLP                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                 ( <MYKEY>                <10/22/84>150)                                         : <MYKEY> ( -- CH )                           <KEY>                                   DUP 30 = IF       ( CTRL-SHFT-N )            DROP 91 ELSE ( [ )                 DUP 29 = IF       ( CTRL-SHFT-M )            DROP 93      ( ] )                 THEN THEN ;                                                               EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                 ( ZEMIT                  <10/22/84>151) HEX                                     CODE ZEMIT                                          XSAVE STX,                              BOT LDA,                                0FDED JSR,                              XSAVE LDX,                                                                      ' OUT INC,                    0= IF,    ' OUT 1+ INC,                 THEN,                                             POP JMP, C;                 DECIMAL                                                                         EXIT                                                                                                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                 ( NORMAL INVERSE FLASH   <10/22/84>152) ( NOT TESTED ON //E )                                                             ( NORMAL EMIT )                       : NEMIT ( C -- ) 128 OR ZEMIT ;                                                   ( INVERSE EMIT )                      : IEMIT ( C -- )                           DUP 7 =                                 IF NEMIT                                ELSE 63 AND ZEMIT THEN ;                                                       ( FLASH EMIT )                        : FEMIT ( C -- )                           DUP 7 =                                 IF   NEMIT                              ELSE 63 AND 64 OR ZEMIT THEN ;                                               : NORMAL  ( -- ) ' NEMIT CFA ' EMIT ! ; : INVERSE ( -- ) ' IEMIT CFA ' EMIT ! ; : FLASH   ( -- ) ' FEMIT CFA ' EMIT ! ;                                         EXIT                                                                   (  RLP )                                                                 ( BUFFERS                <10/22/84>153)                                         ( N ---, <INSTALLS N OR MAX AVAIL. )                                            : BUFFERS CR FLUSH LIMIT PAD               200 + - 0 1028 U/MOD SWAP               DROP DUP 2 <                             IF 2BEEP ." OUT OF MEMORY" QUIT         THEN MIN 2 MAX DUP . DUP ' #BUFF !    ." BUFFERS INSTALLED" CR 1028 * LIMIT    SWAP - DUP ' FIRST ! DUP USE !          PREV ! EMPTY-BUFFERS ;                                                       EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( TONE                   <10/22/84>154)                                         CODE <TONE>  2 # LDA, SETUP JSR,           N 3 + INC, N 1+ INC,                    BEGIN, N 3 + LDA, N 4 + STA,             N 2+ LDY, 49200 LDA,                      BEGIN, DEY, 0=                             IF, N 4 + DEC,                          THEN, 0=                             UNTIL, N DEC, 0=                        IF, N 1+ DEC,                           THEN, 0=                             UNTIL, NEXT JMP, C;                                                          ( FREQ,HZ DURATION,1/100SEC ---,      ) : TONE  68500. 4 ROLL U/MOD SWAP DROP       SWAP 1278 3 PICK 3 + */ <TONE> ;                                            EXIT                                                                                                                                                                                                                                   (  RLP )                                                                 ( TEXT ETC.              <10/22/84>155) HEX                                                                             : C@DROP C@ DROP ;                                                              : TEXT   C051 C@DROP ;                                                          : 1PAGE  C054 C@DROP ;                                                          : HI-RES C057 C@DROP ;                                                          : GRAPHICS    C053 C@DROP C050 C@DROP ;                                         : ALL-GRAPHICS                                        C052 C@DROP C050 C@DROP ;                                         DECIMAL                                                                         EXIT                                                                                                                                                                                                                                   (  RLP )                                                                 ( CLS HG 1HG HGR         <10/22/84>156)                                         : CLS  8192 8192 0 FILL ;               : HG   1PAGE HI-RES ALL-GRAPHICS ;      : 1HG  1PAGE HI-RES GRAPHICS ;          : HGR  HG CLS ;                                                                 EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( EL ED ? BASE. .X       <10/22/84>157)                                         1024 CONSTANT 1K                        8192 CONSTANT 8K                        HEX                                     : CVARIABLE VARIABLE ;                  : EL    C051 C@ DROP SCR @ EDIT ;       : ED    C051 C@ DROP EDIT ;             : BASE. BASE @ DUP DECIMAL . BASE ! ;   : X.    BASE @ HEX SWAP U. BASE ! ;     : E-B   EMPTY-BUFFERS ;                 : ?     @ . ;                           : C?    C@ . ;                          : <>    = NOT ;                         : <=    > NOT ;                         : >=    < NOT ;                         : PRON  1 EPRINT ! 1 PR# ;              : PROFF 0 EPRINT ! 0 PR# ;              : LAOD  LOAD ;                          DECIMAL                                                                         EXIT                                                                                                           (  RLP )                                                                 ( INVERT WITHIN          <10/22/84>158)                                         : INVERT -1 XOR ;                                                               : WITHIN ( N LOW HIGH -- 0/1 )              >R OVER >  SWAP R> >  OR NOT ;                                              EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( MYSELF ASCII           <10/22/84>159)                                         : MYSELF ( FOR RECURSIVE CALLS )              LATEST PFA CFA , ; IMMEDIATE                                              ( COMPILE ASCII VALUE OF NEXT CHAR )    : ASCII 32 WORD 1+ C@                           [COMPILE] LITERAL ; IMMEDIATE                                           EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( INTEGER TO +TO         <10/22/84>160)                                         : INTEGER 0 CONSTANT ;                                                          : TO ( N "TO" NAME -- )                      -FIND NOT ABORT" NOT FOUND"             STATE @ <                               IF   [COMPILE] LITERAL                       COMPILE !                          ELSE ! THEN ; IMMEDIATE                                                    : +TO ( N "+TO" NAME -- )                    -FIND NOT ABORT" NOT FOUND"             STATE @ <                               IF   [COMPILE] LITERAL                       COMPILE +!                         ELSE +! THEN ; IMMEDIATE                                                   EXIT                                                                                                                                                                                                                                   (  RLP )                                                                 ( BEXPECT                <10/22/84>161) ( DOES NOT PUT 0 BYTE AT END; )         ( REJECTS CONTROL CHARACTERS )          : BEXPECT ( ADDR COUNT -- )                DDUP BL FILL ( COUNT ) >R               0  BEGIN                                      KEY DUP 13 = NOT                     WHILE                                      DUP 8 = OVER 127 = OR IF                   DROP DUP 0>                             IF 8 EMIT BL EMIT 8 EMIT                   BL 3 PICK 3 PICK + C! 1-             ELSE 7 EMIT DROP 0 THEN              ELSE DUP BL <                              IF DROP 7 EMIT                       ELSE OVER R@ < IF                          DUP EMIT                                3 PICK 3 PICK + C! 1+                ELSE DROP 7 EMIT                        THEN THEN THEN                       REPEAT DROP                          R> DROP BL EMIT DDROP ;              EXIT                                                                   (  RLP )                                                                 ( TABLE 2ARRAY           <10/22/84>162)                                         ( DEFINE TABLE OF WORD-SIZE CONSTANTS ) : TABLE CREATE                                  DOES>  ( INDEX -- VALUE )                      SWAP 2* + @                ; IMMEDIATE                                                                   EXIT                                                                            : 2ARRAY                                  CREATE ( XDIM YDIM "2ARRAY" NAME -- )        OVER , OVER ,                           * 2* ALLOT                         DOES>  ( XINDEX YINDEX -- ADDRESS )          DUP >R @     ( GET XDIM )               *            ( YOFFSET )                +            ( + XOFFSET )              2* 4 + R> +  ( ADDRESS )           ; IMMEDIATE                                                                                                                                                                                  (  RLP )                                                                 ( BSPLIT BJOIN           <10/22/84>163)                                         : BSPLIT 0 256 U/MOD ;                  : BJOIN  256 * + ;                      : BSWAP  BSPLIT SWAP BJOIN ;            EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( \ .S                   <10/22/84>164)                                         : \  >IN @ C/L / 1+ C/L * >IN ! ;           IMMEDIATE                                                                   : .S CR DEPTH                                   IF   SP@ 2- S0 2-                            DO I @ 0 D. -2 +LOOP               ELSE ." EMPTY STACK"                    THEN CR ;                                                               EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( INDEX                  <10/22/84>166)                                         : INDEX ( S E -- )                         CR 1+ SWAP                              DO CR EPRINT @                             IF 6 SPACES                                I 3 .R SPACE                            0 I .LINE                            ELSE                                       0 I .LINE                               XY@ >R DROP                             35 R> XYTAB                             I 3 .R                               THEN                                    PAUSE ?TERMINAL IF LEAVE THEN        LOOP ;                                                                       EXIT                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( DUMP                   <10/22/84>167) ( REWRITTEN TO FIT ON 40-COL SCREEN   )                                         : DUMP ( ADDR N -- )                       BASE @ >R HEX                           0 DO                                       CR DUP I + 0 4 D.R                      58 EMIT SPACE                           8 0 DO                                     DUP I + J + C@ 3 .R                  LOOP                                    8 0 DO                                     DUP I + J + C@                          DUP BL < IF DROP 46 THEN EMIT        LOOP                                    PAUSE ?TERMINAL IF LEAVE THEN        8 /LOOP                                 DROP R> BASE ! ;                                                             EXIT                                                                                                                                                                                           (  RLP )                                                                 ( 4LST FOR OKIDATAS      <10/22/84>168) ( WORKS WITH OKIDATA PRINTERS ONLY )      VARIABLE BLCNT                        : PRFF 12 EMIT 0 BLCNT ! ;              : TOF 1 PR# PRFF 0 PR# ;                : TAB48  27 EMIT  ." %B0600" ;          : TABX   27 EMIT  ." %B0100" ;          : 2LIST ( S1 S2 - * ; PRINT S1 S2 )             ( IF S2 NEG DON'T PRINT )          28 EMIT 31 EMIT CR TABX                 ." SCR NO. " OVER .  TAB48              DUP 0< NOT                              IF ." SCR NO. " DUP . THEN              CR 28 EMIT TABX                         24 0 DO CR TABX                            I 3 PICK .LINE                          DUP 0< NOT                              IF TAB48 I OVER .LINE THEN           LOOP DDROP CR CR                        BLCNT @ 1 =                             IF PRFF ELSE 1 BLCNT ! THEN ;                                                EXIT                                                                   (  RLP )                                                                 ( 4LST FOR OKIDATAS      <10/22/84>169) VARIABLE BL#S                                                                   : 0BLK? ( BLK# -- T/F ; T IF ALL 32'S )    BLOCK 1 1024 0                          DO OVER I + C@ 32 >                        IF DROP 0 LEAVE THEN                 LOOP SWAP DROP ;                                                             : 4LST ( S E -- ; FROM S TO E )            ?2NUM 1 PR# SWAP 0 BL#S ! 0 BLCNT !     BEGIN DUP 0BLK? NOT                        IF BL#S @ 0=                               IF    DUP BL#S !                        ELSE  BL#S @ OVER 2LIST                       0 BL#S !                          THEN                                 THEN DUP 3 PICK <                    WHILE 1+ REPEAT                         BL#S @ 0= NOT                           IF BL#S @ -1 2LIST THEN                 BLCNT @ IF PRFF THEN 0 PR# ;         EXIT                                                                   (  RLP )                                                                 ( CRUNCH PRIMS           <10/22/84>170)                                         ( ALREADY LOADED BY 4LST )              ( 0BLK? ( BLK# -- T/F ; T IF ALL 32'S ) ( 1 SWAP BLOCK 1024 0 )                 ( DO DUP I + C@ 32 >  )                 (  IF SWAP DROP 0 SWAP LEAVE THEN )     ( LOOP DROP ; )                                                                 : MOVE-BLK ( S D -- MOVE S TO D )                  ( ERASING S )                  BUFFER UPDATE OVER BLOCK SWAP           1024 CMOVE BLOCK UPDATE                 1024 32 FILL  ;                                                               EXIT                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( CRUNCH                 <10/22/84>171)                                         VARIABLE DBLK                                                                   : CRUNCH ( START END -- * )               1+ SWAP DUP DBLK !                      DO I . I 0BLK? NOT                       IF I DBLK @ = NOT                        IF I DBLK @ MOVE-BLK                    THEN                                    1 DBLK +!                              THEN                                   LOOP                                    CR CR ." NEXT FREE BLOCK -- "           DBLK @ . CR CR ;                                                              EXIT                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                 ( PLIST PLISTS           <10/22/84>172)   VARIABLE PLINE                        : ?INDENT  EPRINT @ IF 8 SPACES THEN ;  : PLIST ( N -- )                            DUP BLOCK SWAP                          CR ?INDENT ." SCR# " . 1 PLINE +!     1 24 0 DO                                   OVER 40  -TRAILING                      ROT OVER OR                             IF   CR ?INDENT 1 PLINE +!                   DUP >R TYPE                        ELSE >R DROP                            THEN 40 + R>                          LOOP DDROP CR CR 2 PLINE +! ;       : PLISTS ( N1 N2 -- )                       0 PLINE ! 1 EPRINT ! 1 PR#              1+ SWAP                                 DO   I PLIST                                 PLINE @ 30 >                            IF 12 EMIT 0 PLINE ! THEN          LOOP PLINE @ IF 12 EMIT THEN            0 EPRINT ! 0 PR# 0 PLINE ! ;        EXIT                                                                   (  RLP )                                                                 ( SHOW                   <10/22/84>173)                                         ( NO. = DELAY, 1/100 SECONDS IF > 33 )    VARIABLE SHOWDELAY  0 SHOWDELAY !                                             ( FIRSTSCRN LASTSCRN ---, )             : SHOW  PAGE 1+ SWAP                       DO I 0 22 XYTAB                            DUP BLK->CRT SCR !                      SHOWDELAY @ 33 - 0 MAX                  ?DUP IF 0 DO 73 0 DO LOOP LOOP          ?TERMINAL IF LEAVE THEN              LOOP 0 22 XYTAB ;                                                            EXIT                                                                                                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( ZERO PAGE USAGE        < 8/31/84>180) HEX                                       D4 CONSTANT GBASE      ( >Y ADDRESS )   D6 CONSTANT GPATTERN   ( >PATTERN   )   D8 CONSTANT GFIG       ( >FIG DATA  )   DA CONSTANT GMODE      ( FILL MODE  )   DC CONSTANT 7QUO       ( X OFFSET   )   DE CONSTANT 7REM       ( DOT NUM.   )                                         DECIMAL                                                                         -->                                     EXIT                                                                            LOCATIONS D0 THROUGH EF ARE NOT USED    BY MVP-PADS, TO ALLOW USE OF THE        APPLESOFT RAM FLOATING-POINT AND        GRAPHICS ROUTINES.                      THESE PARTICULAR LOCATIONS ARE PART OF  THE FP SCRATCH AREA.                    NOTE THAT D0 IS JUST ABOVE              THE BOTTOM OF THE FORTH DATA STACK.                                                                                                                                                     ( $YADDR SUBROUTINE      < 8/31/84>181) ( ENTRY: LINE# IN X REG   )             ( EXIT:  ADDRESS IN GBASE )             ( ALL REGISTERS PRESERVED )                                                     HEX                                     CODE $YADDR                                PHA, TXA, # C0  AND, GBASE STA,                   .A LSR, .A LSR,                         GBASE ORA, GBASE STA,              TXA, GBASE 1+ STA, .A ASL,                   .A ASL, .A ASL,                         GBASE 1+ ROL, .A ASL,                   GBASE 1+ ROL, .A ASL,                   GBASE ROR,                              GBASE 1+ LDA, # 1F AND,                 # 20 ORA, GBASE 1+ STA,       PLA, RTS, C;                         DECIMAL                                 -->                                     EXIT                                    NOTE: ONLY VALID FOR 0 <= LINE# <= 191  BOMBS FORTH WHEN -1 OR 255                                             (  RLP )                                                                 ( YADDR CODE VERSION     < 8/31/84>182)                                         CODE YADDR ( Y -- YADDR )                    XSAVE STX, BOT LDA, TAX,                ' $YADDR JSR,                           XSAVE LDX,                              GBASE    LDA, BOT    STA,               GBASE 1+ LDA, BOT 1+ STA,               NEXT JMP, C;                       -->                                     EXIT                                                                            ALGORITHM IN BASIC:                      INPUT Y                                 Y1 = INT(Y /8) : YR = Y  - Y1*8         Y2 = INT(Y1/8) : YS = Y1 - Y2*8         L  = 8192 + 40*Y2 + 128*YS + 1024*YR                                                                                                                                                                                                                                                                                  (  RLP )                                                                 ( BIT MASK TABLES        < 8/31/84>183) HEX                                                                             CREATE BITTBL                                   1 C,  2 C,  4 C,  8 C,                 10 C, 20 C, 40 C, 80 C,                                                  CREATE LMASKS                                  7F C, 7E C, 7C C, 78 C,                 70 C, 60 C, 40 C, 00 C,                                                  CREATE RMASKS                                  01 C, 03 C, 07 C, 0F C,                 1F C, 3F C, 7F C, FF C,                                                  DECIMAL                                 -->                                                                                                                                                                                                                                                                                                                    (  RLP )                                                                 ( $7/MOD SUBROUTINE      < 8/31/84>184) ( ENTRY: "A" = LSB, "Y" = MSB  )        ( EXIT:  RESULTS IN 7QUO, 7REM )        ( ALL REGISTERS PRESERVED      )                                                CODE $7/MOD   7REM STA,                               PHA, TXA, PHA, TYA, PHA,                7REM LDA,                               # 0 CPY,                  0= IF,        7REM LDX,                 ELSE,         # 36 LDY, 7REM LDA, CLC,                # 4 ADC, # 31 AND, TAX,   THEN,         TXA, SEC, # 126 SBC,      CS IF,        TAX, TYA, CLC,                          # 18 ADC, TAY,            THEN,         TXA,                      BEGIN,        INY, SEC, # 7 SBC,        CS NOT UNTIL, DEY, CLC, # 7 ADC,                      7REM STA, 7QUO STY,                     PLA, TAY, PLA, TAX, PLA,                RTS,                      END-CODE                                -->                                                                    (  RLP )                                                                 ( 7/MOD                  < 8/31/84>185)                                         CODE 7/MOD ( SX -- 7REM 7QUO )                     BOT LDA, BOT 1+ LDY,                    ' $7/MOD JSR,                           DEX, DEX, # 0 LDA,                      BOT 1+ STA, SEC 1+ STA,                 7QUO LDA, BOT STA,                      7REM LDA, SEC STA,                      NEXT JMP, C;                                                         : 7/   7/MOD SWAP DROP ;                : 7MOD 7/MOD DROP ;                                                             -->                                     EXIT                                                                            RESULTS ARE ONLY VALID FOR              0 <= SX <= 286                                                                                                                                                                                                                         (  RLP )                                                                 ( COLORTAB NOTES         < 8/31/84>186) -->                                     EXIT                                                                            EACH ENTRY IN COLORTAB IS A NINE-BYTE   BLOCK.                                  THE FIRST EIGHT BYTES FORM AN 8-BY-8    BIT ARRAY THAT IS EXPANDED INTO         EIGHT FULL SCAN LINES.                  THE NINTH BYTE INDICATES WHETHER THE    COLOR BIT IS TURNED ON FOR EACH SCAN    LINE.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          (  RLP )                                                                 ( COLORTAB               < 8/31/84>187) HEX                                                                             CREATE COLORTAB                                                                 (  0 = BLACK1 )                               00 C, 00 C, 00 C, 00 C,                 00 C, 00 C, 00 C, 00 C, 00 C,                                             (  1 = VIOLET )                               55 C, 55 C, 55 C, 55 C,                 55 C, 55 C, 55 C, 55 C, 00 C,                                             (  2 = GREEN  )                               AA C, AA C, AA C, AA C,                 AA C, AA C, AA C, AA C, 00 C,                                             (  3 = WHITE1 )                               FF C, FF C, FF C, FF C,                 FF C, FF C, FF C, FF C, 00 C,     DECIMAL                                 -->                                                                                                            (  RLP )                                                                 ( COLORTAB CONTINUED     < 8/31/84>188) HEX                                                                                                                                                             (  4 = BLACK2 )                               00 C, 00 C, 00 C, 00 C,                 00 C, 00 C, 00 C, 00 C, FF C,                                             (  5 = BLUE   )                               55 C, 55 C, 55 C, 55 C,                 55 C, 55 C, 55 C, 55 C, FF C,                                             (  6 = ORANGE )                               AA C, AA C, AA C, AA C,                 AA C, AA C, AA C, AA C, FF C,                                             (  7 = WHITE2 )                               FF C, FF C, FF C, FF C,                 FF C, FF C, FF C, FF C, FF C,     DECIMAL                                 -->                                                                                                            (  RLP )                                                                 ( COLORTAB CONTINUED     <10/12/84>189) HEX                                     ( VIOLET )                              ( &BLACK) 44 C, 11 C, 44 C, 11 C,                 44 C, 11 C, 44 C, 11 C, 00 C, ( &WHITE) 77 C, DD C, 77 C, DD C,                 77 C, DD C, 77 C, DD C, 00 C, ( GREEN )                               ( &BLACK) 22 C, 88 C, 22 C, 88 C,                 22 C, 88 C, 22 C, 88 C, 00 C, ( &WHITE) EE C, BB C, EE C, BB C,                 EE C, BB C, EE C, BB C, 00 C, ( BLUE )                                ( &BLACK) 44 C, 11 C, 44 C, 11 C,                 44 C, 11 C, 44 C, 11 C, FF C, ( &WHITE) 77 C, DD C, 77 C, DD C,                 77 C, DD C, 77 C, DD C, FF C, ( ORANGE )                              ( &BLACK) 22 C, 88 C, 22 C, 88 C,                 22 C, 88 C, 22 C, 88 C, FF C, ( &WHITE) EE C, BB C, EE C, BB C,                 EE C, BB C, EE C, BB C, FF C, DECIMAL                                 -->                            (  RLP )                                                                 ( COLORTAB CONTINUED     <10/12/84>190) -->                                                                                                                                                             ( FOUR COLORS OF GRAY )                 HEX                                           CC C, 33 C, CC C, 33 C,                 CC C, 33 C, CC C, 33 C, 00 C,           66 C, 99 C, 66 C, 99 C,                 66 C, 99 C, 66 C, 99 C, 00 C,           CC C, 33 C, CC C, 33 C,                 CC C, 33 C, CC C, 33 C, FF C,           66 C, 99 C, 66 C, 99 C,                 66 C, 99 C, 66 C, 99 C, FF C,     DECIMAL                                 -->                                                                                                                                                                                                                                                                                                                    (  RLP )                                                                 ( COLORTAB CONTINUED     <10/12/84>191) -->                                     ( MISCELLANEOUS )                       HEX                                           55 C, AA C, 55 C, AA C,                 55 C, AA C, 55 C, AA C, 00 C,           55 C, AA C, 55 C, AA C,                 55 C, AA C, 55 C, AA C, 55 C,           55 C, AA C, 55 C, AA C,                 55 C, AA C, 55 C, AA C, AA C,           55 C, AA C, 55 C, AA C,                 55 C, AA C, 55 C, AA C, FF C,                                                   55 C, 55 C, 55 C, 55 C,                 55 C, 55 C, 55 C, 55 C, 55 C,           AA C, AA C, AA C, AA C,                 AA C, AA C, AA C, AA C, 55 C,           55 C, 55 C, 55 C, 55 C,                 55 C, 55 C, 55 C, 55 C, AA C,           AA C, AA C, AA C, AA C,                 AA C, AA C, AA C, AA C, AA C,     DECIMAL                                 -->                                                                    (  RLP )                                                                 ( $SETPATTERN VARS       <10/ 9/84>192)                                         CREATE   TEMPLATE      9 ALLOT                                                  CREATE PATBUF          40 ALLOT                                                 CREATE 'PATBUF         ' PATBUF ,                                               VARIABLE LEFT.D7     0 LEFT.D7   !      VARIABLE LEFT.MSK    0 LEFT.MSK  !      VARIABLE RIGHT.D7    0 RIGHT.D7  !      VARIABLE RIGHT.MSK   0 RIGHT.MSK !      -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( $>PATBUF               <10/19/84>193) ( ALL REGISTERS PRESERVED )                                                     CODE $>PATBUF                                       PHA, TYA, PHA, TXA, PHA,                                                        # 7 AND, TAX,                                                                   'PATBUF     LDA,                        GPATTERN    STA,                        'PATBUF  1+ LDA,                        GPATTERN 1+ STA,                                                                TEMPLATE 8 + LDA,                       BITTBL ,X AND,               0= NOT IF, # 128 LDA,                   THEN,      N 1+  STA,                                                          --> ( MORE )                                                                                                                                                                                                                           (  RLP )                                                                 ( $>PATBUF               <10/19/84>194)                                                     TEMPLATE ,X LDA,                        # 39 LDY,                     BEGIN,    RIGHT.D7 CPY,                 0= NOT WHILE,                                     PHA, .A LSR,                            PLA, .A ROR,                            DEY,                          REPEAT,                                 BEGIN,    PHA, .A LSR,                            N 1+ ORA,                               PATBUF ,Y STA,                          PLA, .A ROR,                            LEFT.D7 CPY,                  0= NOT WHILE,                                     DEY,                          REPEAT,                                           PLA, TAX, PLA, TAY, PLA,                RTS, C;                     -->                                                                                                                                                                                                                             ( SETPAT SETCOLOR        <10/16/84>195)                                         VARIABLE COLOR#                                                                 : SETPAT ( ADDR -- )                             TEMPLATE 9 CMOVE ;                                                     : HCOLOR ( N -- )                                DUP COLOR# !                            9 * COLORTAB +                          SETPAT ;                                                               : SETMODE  ( N -- ) GMODE ! ;           -->                                                                                                                                                                                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( MASKS FOR HLINE        < 9/ 5/84>196)                                         -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ( $INVERT SUBROUTINE     < 9/ 5/84>197)                                         CODE $INVERTB                                          GBASE )Y EOR,                           GBASE )Y STA,                           RTS,                     END-CODE                                                                        CODE $INVERT                              BEGIN,       GBASE )Y EOR,                           GBASE )Y STA,                           # 127 LDA,                              DEY,                                    LEFT.D7 CPY,               0= UNTIL,    LEFT.MSK LDA,                           ' $INVERTB JMP,          END-CODE                                -->                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( $TURNON SUBROUTINE     <10/14/84>198)                                         CODE $TURNONB                                          GBASE )Y ORA,                           GBASE )Y STA,                           RTS, C;                                                          CODE $TURNON                                           GBASE )Y ORA,              BEGIN,       GBASE )Y STA,                           # 127 LDA,                              DEY,                                    LEFT.D7  CPY,              0= UNTIL,    LEFT.MSK LDA,                           ' $TURNONB JMP, C;       -->                                                                                                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( $TURNOFF SUBROUTINE    <10/14/84>199)                                         CODE $TURNOFFB                                         # 255 EOR,                              GBASE )Y AND,                           GBASE )Y STA,                           RTS, C;                                                          CODE $TURNOFF                                          # 255 EOR,                              GBASE )Y AND,              BEGIN,       GBASE )Y STA,                           # 0 LDA,                                DEY,                                    LEFT.D7 CPY,               0= UNTIL,    LEFT.MSK LDA,                           ' $TURNOFFB JMP, C;      -->                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( $INVPAT SUBROUTINE     <10/14/84>200)                                         CODE $INVPATB                                          # 128 ORA, N STA,                       # 255 EOR, GBASE )Y AND,                N 1+ STA,                               GPATTERN )Y LDA,                        # 127 EOR,                              N AND, N 1+ ORA,                        GBASE )Y STA,                           RTS, C;                                                          CODE $INVPAT                                           ' $INVPATB JSR,           BEGIN,        DEY,                                    LEFT.D7 CPY,              0= NOT WHILE, GPATTERN )Y LDA,                        # 127 EOR,                              GBASE )Y STA,             REPEAT,       LEFT.MSK LDA,                           ' $INVPATB JMP, C;       -->                                                                                                            (  RLP )                                                                 ( $ANDPAT SUBROUTINE     <10/14/84>201) --> EXIT                                CODE $ANDPATB                                           GPATTERN )Y AND,                        GBASE )Y AND,                           GBASE )Y STA,                           RTS,                    END-CODE                                                                        CODE $ANDPAT                                            GPATTERN )Y AND,          BEGIN,        GBASE )Y AND,                           GBASE )Y STA,                           DEY,                                    LEFT.D7 CPY,              0= NOT WHILE, GPATTERN )Y LDA,          REPEAT,       LEFT.MSK LDA,                           ' $ANDPATB JMP,         END-CODE                                -->                                                                                                                                                                                            (  RLP )                                                                 ( $EORPAT SUBROUTINE     <10/12/84>202)                                         CODE $EORPATB                                           # 128 ORA,                              GPATTERN )Y AND,                        GBASE )Y EOR,                           GBASE )Y STA,                           RTS,                    END-CODE                                                                        CODE $EORPAT                                            # 128 ORA,                              GPATTERN )Y AND,          BEGIN,        GBASE )Y EOR,                           GBASE )Y STA,                           DEY,                                    LEFT.D7 CPY,              0= NOT WHILE, GPATTERN )Y LDA,          REPEAT,       LEFT.MSK LDA,                           ' $EORPATB JMP,         END-CODE                                -->                                                                                                            (  RLP )                                                                 ( FILLPAT                <10/14/84>203)                                         CODE $FILLPATB  # 128 ORA,                              N STA,                                  GBASE )Y LDA,                           GPATTERN )Y EOR,                        N AND,                                  GBASE )Y EOR,                           GBASE )Y STA,                           RTS, C;                                                         CODE $FILLPAT                                           ' $FILLPATB JSR,          BEGIN,        DEY,                                    LEFT.D7 CPY,              0= NOT WHILE, GPATTERN )Y LDA,                        GBASE )Y STA,             REPEAT,       LEFT.MSK LDA,                           ' $FILLPATB JMP, C;     -->                                                                                                                                                                                            (  RLP )                                                                 ( $HLINED                < 9/30/84>204)                                         CODE $HLINED                                         PHA,                                    GMODE LDA, N STA, N INC,                PLA,                                    N DEC,                         0= IF,   ' $INVERTB  JMP,               THEN,    N DEC,                         0= IF,   ' $TURNONB  JMP,               THEN,    N DEC,                         0= IF,   ' $TURNOFFB JMP,               THEN,    N DEC,                     (   0= IF,   ' $ANDPATB  JMP,           (   THEN,    N DEC,                     )   0= IF,   ' $INVPATB  JMP,               THEN,    N DEC,                         0= IF,   ' $EORPATB  JMP,               THEN,                                            ' $FILLPATB JMP,           END-CODE                                -->                                     ( ENTRY POINT WHEN LEFT AND RIGHT ARE     IN THE SAME BYTE )                                                                                    ( $HLINEC                < 9/30/84>205)                                         CODE $HLINEC                                         PHA,                                    GMODE LDA, N STA, N INC,                PLA,                                    N DEC,                         0= IF,   ' $INVERT   JMP,               THEN,    N DEC,                         0= IF,   ' $TURNON   JMP,               THEN,    N DEC,                         0= IF,   ' $TURNOFF  JMP,               THEN,    N DEC,                     (   0= IF,   ' $ANDPAT   JMP,           (   THEN,    N DEC,                     )   0= IF,   ' $INVPAT   JMP,               THEN,    N DEC,                         0= IF,   ' $EORPAT   JMP,               THEN,                                            ' $FILLPAT  JMP,           END-CODE                                -->                                     ( ENTRY POINT WHEN LEFT AND RIGHT ARE     IN DIFFERENT BYTES )         (  RLP )                                                                 ( $HLINEB                <10/ 9/84>206)                                         CODE $HLINEB                                     # 192 CPX, CS IF, RTS, THEN,                                                    RIGHT.MSK LDA,                          RIGHT.D7  LDY,                          LEFT.D7   CPY,                   0= IF, LEFT.MSK  AND,                          ' $HLINED JMP,                   ELSE,  ' $HLINEC JMP,                   THEN,  C;                                                                     -->                                                                             ( ENTRY POINT WHEN YADDRESS )           ( AND PATTERN ADDRESS HAVE  )           ( ALREADY BEEN COMPUTED     )                                                                                                                                                                                                                                                  (  RLP )                                                                 ( $HLINE  HLINE          <10/14/84>207) ( DRAW HORIZONTAL LINE WITHIN )         ( CURRENT END POINTS          )         ( "X" = YLINE #               )                                                 CODE $HLINE                                      # 192 CPX, CS IF, RTS, THEN,                                                    ' $>PATBUF JSR,                         ' $YADDR JSR,                           ' $HLINEB JMP, C;                                                      CODE HLINE ( Y -- )                              XSAVE STX,                              BOT LDA, TAX,                           ' $HLINE JSR,                           XSAVE LDX,                              POP JMP, C;                                                            -->                                                                                                                                                                                            (  RLP )                                                                 ( SETENDPTS              <10/12/84>208)                                         : SETENDPTS ( X1 X2 -- )                      DDUP > IF SWAP THEN                                                             0 MAX 279 MIN                           7/MOD RIGHT.D7 !                        RMASKS + C@ RIGHT.MSK !                                                         0 MAX 279 MIN                           7/MOD LEFT.D7 !                         LMASKS + C@ LEFT.MSK ! ;                                                  0 279 SETENDPTS                                                                 -->                                                                                                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( VLINE  FS              <10/14/84>209)                                         VARIABLE VY1                            VARIABLE VY2                                                                    CODE $VLINE    TXA, PHA,                               VY1 LDX,                  BEGIN,        ' $HLINE JSR,                           VY2 CPX,                  CS NOT WHILE, INX,                      REPEAT,       PLA, TAX, RTS, C;                                                : VLINE ( Y1 Y2 -- )                          SWAP 0 MAX 191 MIN                      SWAP 0 MAX 191 MIN                      VY2 ! VY1 !                             ' $VLINE CALL ;                                                           : FS ( N -- ) HCOLOR                          0 279 SETENDPTS 0 191 VLINE ;     EXIT                                                                                                                                                   (  RLP )                                                                 ( $HPLOT                 <10/12/84>210) ( ENTRY: "X" = Y COORD     )            ( "A" = X COORD LSB "Y" = X COORD MSB )                                         CODE $HPLOT                                         # 192 CPX,                    CS IF,    RTS,                          THEN,                                             N STA,                                  PHA, TXA, PHA, TYA, PHA,                N LDA,                                  ' $7/MOD JSR,                           ' $YADDR JSR,                           7QUO LDA,                               LEFT.D7 STA,                            RIGHT.D7 STA,                                                       --> ( MORE ... )                                                                                                                                                                                                                                                               (  RLP )                                                                 ( $HPLOT CONTINUED       <10/12/84>211)                                                     7REM LDY,                               LMASKS ,Y LDA,                          LEFT.MSK  STA,                          # 6 CPY,                     CS IF,     RIGHT.D7 INC,                           # 0 LDY,                     ELSE,      INY,                         THEN,                                              RMASKS ,Y LDA,                          RIGHT.MSK STA,                          ' $HLINE JSR,                           PLA, TAY, PLA, TAX, PLA,                RTS, C;                     -->                                                                             EXIT                                    ( WILL WRAP AROUND )                    ( IF PLOTTING AT X = 279 )                                                                                                                                                                     (  RLP )                                                                 ( HPLOT                  <10/14/84>212)                                         CODE $PULLXY                                     SEC    LDA, PHA,    ( XLO )             SEC 1+ LDA, TAY,    ( XHI )             BOT    LDA, TAX,    ( YLO )                    PLA, RTS, C;                                                    CODE HPLOT ( X Y -- )                            XSAVE     STX,                          ' $PULLXY JSR,                          ' $HPLOT  JSR,                          XSAVE     LDX,                          POPTWO    JMP, C;              EXIT                                                                                                                                                                                                                                                                                                                                                                                                   (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( VSCROLL                <10/16/84>215) VARIABLE V#                                                                     CODE $VSCROLL  TXA, PHA, TYA, PHA,                     VY1 LDX,                  BEGIN,        TXA, PHA,                               CLC, V# ADC, TAX,                       VY2 CPX,                  CS NOT WHILE, ' $YADDR JSR,                           GBASE       LDA,                        GPATTERN    STA,                        GBASE    1+ LDA,                        GPATTERN 1+ STA,                        PLA, TAX,                               ' $YADDR JSR,                           ' $HLINEB JSR,                          INX,                      REPEAT,       PLA, TAX,                               ' $CLRLIN JSR,            BEGIN,        ' $MVCH JSR, INX,                       VY2 CMP,                  CS UNTIL,     PLA, TAY, PLA, TAX,                     RTS, C;                  -->                                                                                                     ( VSCROLL                <10/16/84>216)                                         : VSCROLL ( Y1 Y2 DELY -- )                   V# !                                    DDUP > IF SWAP THEN                     VY2 ! VY1 !                             ' $VSCROLL CALL ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (  RLP )                                                                 ( VSCROLL                <10/16/84>217)                                         CODE HLINEB                                   XSAVE STX, BOT LDA, TAX,                ' $YADDR JSR,                           ' $HLINEB JSR,                          XSAVE LDX, POP JMP, C;                                                    : VSCROLL ( Y1 Y2 DY -- )                  GMODE C@ >R                             5 SETMODE                                  SWAP OVER - >R >R                       I' 1+ SWAP DO                              I J + YADDR GPATTERN !                  I HLINEB                             LOOP                                 2 SETMODE                                  R> 0 DO                                    I J + HLINE                          LOOP                                 R> DROP R> SETMODE ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ( V.2 CHARACTER DRAW     <10/15/84>220)                                         : CTASK ;                               --> EXIT                                                                        V.2 CHARACTER DRAW                               CHARACTER IS SURROUNDED                 ON ALL SIDES BY 1-BIT BOUNDARY                                         CHARACTER FORMAT:                                                                1 BYTE  WIDTH IN BITS                   1 BYTE  HEIGHT IN SCAN LINES            N BYTES CHARACTER DATA; EACH SCAN               LINE IS LEFT-JUSTIFIED                  ON A BYTE BOUNDARY                                                     USAGE:   <ADDR> <XPOS> <YPOS> CDRAW                                                                                                                                                                                                                                            (  RLP )                                                                 ( CDRAW                  <10/22/84>221)                                         VARIABLE CHADDR ( ADDR OF CHAR DATA  )  VARIABLE CHX    ( X DRAW POS.        )  VARIABLE CHY    ( Y DRAW POS.        )  VARIABLE CBITS  ( CHAR WIDTH IN BITS )  VARIABLE CBYTES ( WIDTH IN BYTES     )  VARIABLE CHGT   ( HEIGHT IN LINES    )  VARIABLE CPIX   ( PIXEL OFFSET (DRAW )                                          PATBUF CONSTANT CHARBUF                                                         VARIABLE 'CHARBUF   CHARBUF 'CHARBUF !                                           2 CONSTANT CDELX   ( SPACE BETWEEN  )   2 CONSTANT CDELY   ( LETTERS        )                                          VARIABLE C.RGT.D7                       VARIABLE C.RGT.MSK                      -->                                                                             CDELX AND CDELY ARE USED BY <GEMIT>                                                                                                                                                     ( $CSHIFT                <10/22/84>222)                                         CODE $CSHIFT   TXA, PHA, TYA, PHA,                     CPIX LDX, INX,            BEGIN,        DEX,                      0< NOT WHILE, LEFT.D7 LDY,                            DEY, CLC, PHP,             BEGIN,       INY,                                    CHARBUF ,Y LDA,                         PLP, .A ROL, PHA,                       # 127 AND, N STA,                       GBASE )Y LDA,                           # 128 AND, N ORA,                       CHARBUF ,Y STA,                         PLA, .A ASL, PHP,                       C.RGT.D7 CPY,              0= UNTIL,    PLP,                      REPEAT,      C.RGT.MSK LDA, # 128 ORA,                CHARBUF ,Y AND,                         CHARBUF ,Y STA,                         PLA, TAY, PLA, TAX,                     RTS, C;                  -->                                                                                                                                             ( $CHLIN                 <10/22/84>223)                                         CODE $CHLIN                                               TYA, PHA,                               ' $YADDR JSR,                           GMODE LDA, # 3 CMP,    CS IF,           # 39 LDY,               BEGIN,          GBASE )Y LDA,                           # 128 AND,                              CHARBUF ,Y STA,                         C.RGT.D7 CPY,           0= NOT WHILE,   DEY,                    REPEAT,         LEFT.D7 LDA, CLC,                       CBYTES ADC,                             C.RGT.D7 CMP,           CS IF,          C.RGT.D7 LDY,           ELSE,           TAY,                    THEN,                                 -->                                                                                                                                                                                                                                                                                                             ( $CHLIN CONT'D          <10/22/84>224)                                           BEGIN,          GFIG )Y LDA,                            CHARBUF ,Y STA,                         LEFT.D7 CPY,            0= NOT WHILE,   DEY,                    REPEAT,                                                 ' $CSHIFT JSR,                                                                  CBYTES LDA, CLC,                        GFIG ADC,                               GFIG STA,                CS IF,         GFIG 1+ INC,             THEN,                                 THEN,                                                    ' $HLINEB JSR,                          PLA, TAY, RTS, C;     -->                                                                                                                                                                                                                                                                                                                                                     ( $CLRLIN                <10/22/84>225)                                         CODE $CLRLIN                                           TYA, PHA,                               ' $YADDR JSR,                           RIGHT.D7 LDY,             BEGIN,        GBASE )Y LDA,                           # 128 AND,                              CHARBUF ,Y STA,                         LEFT.D7 CPY,              0= NOT WHILE, DEY,                      REPEAT,                                               ' $HLINEB JSR,                          PLA, TAY,                               RTS, C;                  -->                                                                                                                                                                                                                                                                                                                                                                                                                                     ( $CDRAW                 <10/22/84>226)                                         CODE $CDRAW       TXA, PHA, TYA, PHA,                     ' CDELY LDA,            0< NOT IF,                                0= NOT IF,    CHY LDX,                                ' $CLRLIN JSR,                          INX,                    THEN, THEN,                                             CHGT LDY, INY,          BEGIN,          DEY,                    0= NOT WHILE,                                           ' $CHLIN JSR,                           INX,                    REPEAT,                                                 ' CDELY LDA,            0< NOT IF,      # 2 CMP,                  CS IF,        ' $CLRLIN JSR,          THEN, THEN,     PLA, TAY, PLA, TAX,                     RTS, C;               -->                                                                                                                                                    (  RLP )                                                                 ( CD-INIT2               <10/22/84>227)                                         VARIABLE &GFIG                                                                  : CD-INIT2 ( -- )                                   CBITS @ 6 + 7/ CBYTES !                 &GFIG @ LEFT.D7 @ - GFIG !              CHARBUF GPATTERN ! ;                                                -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ( CD-INIT                <10/22/84>228)                                         : CD-INIT ( ADDR X Y -- )                 ( Y )     0 MAX 191 MIN CHY !           ( X )     0 MAX 279 MIN CHX !           ( ADDR )  DUP    C@ CBITS !             ( ADDR )  DUP 1+ C@ CHGT !              ( ADDR )  2+ &GFIG !                                                                      CHX @ 7/MOD  LEFT.D7 !                     DUP CPIX !                              LMASKS + C@ LEFT.MSK !                                                       CHX @ CBITS @ + 279 MIN                 DUP 7/MOD                                  C.RGT.D7 !                              RMASKS + C@ C.RGT.MSK !              CDELX + 1- 279 MIN 7/MOD                   RIGHT.D7 !                              RMASKS + C@ RIGHT.MSK !                                                      CD-INIT2 ;                  -->                                                                    (  RLP )                                                                 ( CDRAW                  <10/22/84>229)                                         : CDRAW ( ADDR X Y -- )                          CD-INIT                                 ' $CDRAW CALL ;                                                        EXIT                                                                            ( HAS BUG )                                                                     : REDRAW ( -- )                                  CD-INIT2                                ' $CDRAW CALL ;                                                                                                                                                                                                                                                                                                                                                                                                                                                               (  RLP )                                                                 ( $DOT -- REVECTORABLE   <10/16/84>230)                                         VARIABLE DOTX                           VARIABLE DOTY                           VARIABLE DOTSUBR                                                                CODE $1PLOT                                      TXA, PHA,                               DOTX     LDA, ( X LSB )                 DOTX  1+ LDY, ( X MSB )                 DOTY     LDX, ( Y LSB )                 ' $HPLOT JSR,                           PLA, TAX, RTS, C;                                                      ' $1PLOT DOTSUBR !                                                                                                      CODE $DOT  DOTSUBR ) JMP, C;                                                                                            : DOT ( X Y -- )                              DOTY ! DOTX ! ' $DOT CALL ;       -->                                                                    (  RLP )                                                                 ( LINE -- HIGH LEVEL     <10/12/84>231)                                         VARIABLE LX1      VARIABLE LY1          VARIABLE LX2      VARIABLE LY2          VARIABLE LXTEM    VARIABLE LYTEM                                                VARIABLE DELSX    VARIABLE DELDX        VARIABLE DELSY    VARIABLE DELDY        VARIABLE DELSE    VARIABLE DELDE                                                VARIABLE DELS                           VARIABLE DELP                           VARIABLE LERR                                                                   VARIABLE DCNT                                                                   -->                                                                                                                                                                                                                                                                                                                    (  RLP )                                                                 ( $BRES                  <10/18/84>232) -->                                     CODE $STRAIGHT                                      DELSE    LDA, CLC,                      LERR     ADC, LERR     STA,             DELSE 1+ LDA,                           LERR 1+  ADC, LERR 1+  STA,                                                     DELSX    LDA, CLC,                      DOTX     ADC, DOTX     STA,             DELSX 1+ LDA,                           DOTX  1+ ADC, DOTX  1+ STA,                                                     DELSY    LDA, CLC,                      DOTY     ADC, DOTY     STA,             DELSY 1+ LDA,                           DOTY  1+ ADC, DOTY  1+ STA,                                                     RTS,                        END-CODE                                -->                                                                                                                                                    (  RLP )                                                                 ( $BRES CONTINUED        <10/18/84>233) -->                                     CODE $DIAGONAL                                      DELDE    LDA, CLC,                      LERR     ADC, LERR     STA,             DELDE 1+ LDA,                           LERR 1+  ADC, LERR 1+  STA,                                                     DELDX    LDA, CLC,                      DOTX     ADC, DOTX     STA,             DELDX 1+ LDA,                           DOTX  1+ ADC, DOTX  1+ STA,                                                     DELDY    LDA, CLC,                      DOTY     ADC, DOTY     STA,             DELDY 1+ LDA,                           DOTY  1+ ADC, DOTY  1+ STA,                                                     RTS,                        END-CODE                                -->                                                                                                                                                    (  RLP )                                                                 ( $BRES CONTINUED        <10/18/84>234) -->                                     ( REGISTERS *NOT* PRESERVED )                                                   CODE $BRES                                          LX1     LDA, DOTX    STA,               LX1 1+  LDA, DOTX 1+ STA,               LY1     LDA, DOTY    STA,               LY1 1+  LDA, DOTY 1+ STA,                                                       DELS    LDA, DCNT    STA,               DELS 1+ LDA, DCNT 1+ STA,                                                       DCNT    INC,                 0= IF,     DCNT 1+ INC,                 THEN,                                                                          --> ( MORE ... )                                                                                                                                                                                                                                                               (  RLP )                                                                 ( $BRES CNT'D   <BRES>   <10/18/84>235) -->                                      BEGIN,                                             ' $DOT   JSR,                                                                   LERR 1+  LDA,                   0< IF,  ' $STRAIGHT JSR,                ELSE,   ' $DIAGONAL JSR,                THEN,                                           DCNT     LDA,                   0= IF,  DCNT 1+  DEC,                   THEN,   DCNT     DEC,                           DCNT 1+  LDA,                0< UNTIL,  RTS,                        END-CODE                                                                                                                : <BRES>  ' $BRES CALL ;                                                        -->                                                                                                                                                                                            (  RLP )                                                                 ( BRESENHAM'S ALGORITHM  <10/18/84>236)                                         : BRES ( -- )                               LX1 @ DOTX !                            LY1 @ DOTY !                            DELS @ 1+ 0 DO                              DOTX @ DOTY @ DOT                       LERR @ 0< IF                                   DELSE @ LERR +!                         DELSX @ DOTX +!                         DELSY @ DOTY +!                  ELSE                                           DELDE @ LERR +!                         DELDX @ DOTX +!                         DELDY @ DOTY +!                  THEN                                LOOP ;                              -->                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( BRESENHAM'S ALGORITHM  <10/18/84>237)                                         : BRESENHAM ( -- )                            LY2 @ LY1 @ -                           DUP 0< IF ABS -1 ELSE 1 THEN            DELDY ! DELP !                                                                  LX2 @ LX1 @ -                           DUP 0< IF ABS -1 ELSE 1 THEN            DELDX ! DELS !                                                                  DELS @ DELP @ <                         IF    DELS @ DELP @ DELS ! DELP !             0 DELSX ! DELDY @ DELSY !         ELSE  0 DELSY ! DELDX @ DELSX !         THEN                                                                            DELP @ 2* DUP DELSE !                   DELS @ -  DUP LERR  !                   DELS @ -      DELDE !                   BRES ;                            -->                                           <BRES> ;                                                         (  RLP )                                                                 ( LINE                   <10/18/84>238)                                         : LINE ( X1 Y1 X2 Y2 -- )                     LY2 ! LX2 ! LY1 ! LX1 !                 BRESENHAM ;                                                               : RELINE ( -- ) BRESENHAM ;                                                     -->                                                                             EXIT                                    RELINE DRAWS A LINE USING THE END       POINTS OF THE PREVIOUS LINE.                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                 ( RANDOM                 <10/18/84>239)                                           VARIABLE SEED                                                                 : RANDOM ( N -- I )                              SEED @ U* SWAP DROP                     SEED @ 25717 U* DROP                    4311 + SEED ! ;                                                        : RANPT 280 RANDOM 192 RANDOM ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (  RLP )                                                                 ( AFILL                  <10/12/84>240) ( SIMPLE-MINDED AREA FILL )                                                                                             VARIABLE MATCHME   0 MATCHME !                                                  -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    (  RLP )                                                                 ( $SCANL                 < 9/30/84>241) ( "Y" = X OFFSET          )             ( ALL REGISTERS PRESERVED )             CODE $SCANL                                         PHA, TYA, PHA,              BEGIN,      # 0 CPY,                      0= IF,    LEFT.D7 STY,                            # 127 LDA, LEFT.MSK STA,                PLA, TAY, PLA, RTS,           THEN,     DEY, LEFT.D7 STY,                       GBASE )Y LDA,                           MATCHME EOR, # 127 AND,     0= NOT UNTIL,                                       .A ROL,                                 # 7 LDY,                    BEGIN,      .A ROL,                      CS NOT IF, DEY,                          0< IF,    INY, SEC,                    THEN, THEN,                            CS UNTIL,   LMASKS ,Y LDA,                          LEFT.MSK STA,                           PLA, TAY, PLA, RTS,         END-CODE                                -->                            (  RLP )                                                                 ( $SCANR                 < 9/30/84>242) ( "Y" = X OFFSET          )             ( ALL REGISTERS PRESERVED )                                                     CODE $SCANR                                         PHA, TYA, PHA,              BEGIN,      RIGHT.D7 STY,                           GBASE )Y LDA,                           MATCHME EOR, # 127 AND,      0= WHILE,  # 39 CPY,                     0= IF,    # 127 LDA, RIGHT.MSK STA,               PLA, TAY, PLA, RTS,           THEN,     INY,                        REPEAT,                                             # 255 LDY,                  BEGIN,      INY,                                    .A ROR,                     CS UNTIL,                                           RMASKS ,Y LDA,                          RIGHT.MSK STA,                          PLA, TAY, PLA, RTS,         END-CODE                                -->                                                                    (  RLP )                                                                 ( $AFILLD                <10/12/84>243) ( "X" = Y COORD           )             ( "Y" = X OFFSET          )             ( ALL REGISTERS PRESERVED )                                                     CODE $AFILLD                                        PHA, TXA, PHA,              BEGIN,      # 0 CPX,                     0= NOT WHILE,                                      DEX,                                    ' $YADDR JSR,                           GBASE )Y LDA, # 127 AND,                MATCHME CMP,                 0= NOT IF, PLA, TAX, PLA, RTS,          THEN,                                              TYA, PHA, TXA, PHA,                     ' $SCANR JSR,                           ' $SCANL JSR,                           ' $HLINE JSR,                           PLA, TAX, PLA, TAY,         REPEAT,     PLA, TAX, PLA, RTS,         END-CODE                                -->                                                                    (  RLP )                                                                 ( $AFILLU                <10/12/84>244) ( "X" = Y COORD           )             ( "Y" = X OFFSET          )             ( ALL REGISTERS PRESERVED )                                                     CODE $AFILLU                                        PHA, TXA, PHA,              BEGIN,      ' $YADDR JSR,                           GBASE )Y LDA, # 127 AND,                MATCHME CMP,                 0= NOT IF, PLA, TAX, PLA, RTS,          THEN,                                              TYA, PHA, TXA, PHA,                     ' $SCANR JSR,                           ' $SCANL JSR,                           ' $HLINE JSR,                           PLA, TAX, PLA, TAY,                                                             INX, # 192 CPX,             0= UNTIL,   PLA, TAX, PLA, RTS,         END-CODE                                -->                                                                                                            (  RLP )                                                                 ( $AFILL                 < 9/30/84>245) ( ENTRY: "X" = Y COORD     )            (        "A" = X COORD LSB )            (        "Y" = X COORD MSB )            ( REGISTERS NOT PRESERVED  )                                                    CODE $AFILL                                         ' $7/MOD JSR,                           ' $YADDR JSR,                           7QUO LDY,                               GBASE )Y LDA, # 127 AND,                # 0 CMP,                    0= NOT IF,  # 127 CMP,                   0= NOT IF, RTS,                        THEN, THEN,                                         MATCHME STA,                            ' $AFILLD JSR,                          ' $AFILLU JSR,                          RTS,                        END-CODE                                -->                                                                                                                                                    (  RLP )                                                                 ( AFILL                  < 9/30/84>246)                                         CODE AFILL ( X Y -- )                               XSAVE STX,                              ' $PULLXY JSR,                          ' $AFILL JSR,                           XSAVE LDX,                              POPTWO JMP,                 END-CODE                                                                                                                EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (  RLP )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ( VLINE                  <10/ 3/84>248)                                         VARIABLE VY1     VARIABLE VY2                                                   CODE $VLINE    TXA, PHA,                               VY1 LDX,                  BEGIN,        TXA, PHA,                               ' $HLINE JSR,                           PLA, TAX,                               VY2 CPX,                  CS NOT WHILE, INX,                      REPEAT,       PLA, TAX, RTS,           END-CODE                                                                        : VLINE ( Y1 Y2 -- )                       SWAP 0 MAX 191 MIN                      SWAP 0 MAX 191 MIN                      DDUP > IF SWAP THEN                     VY2 ! VY1 !                             ' $VLINE CALL ;                                                              EXIT                                                                                                                                                                                    ( HBAR VBAR              < 9/30/84>249)                                         6 CONSTANT BARWDTH                                                              : HBAR ( X Y LENGTH -- )                      ROT SWAP OVER +                         DDUP > IF SWAP THEN                     SETENDPTS                               DUP BARWDTH + 192 MIN                   SWAP DO I HLINE LOOP ;                                                    : VBAR ( X Y LENGTH -- )                      ROT DUP BARWDTH + SETENDPTS             OVER +                                  DDUP < IF SWAP THEN                     DO I HLINE LOOP ;                                                                                                                                                                                                                                                                                                                                                                                                                 ( SAMPLE CHAR            <10/14/84>250)                                         CREATE SAM 10 C, 5 C,                   4 BASE !                                   1300 C, 0000 C,                         3120 C, 0000 C,                         2030 C, 0001 C,                         1312 C, 0003 C,                         0003 C, 0012 C,                      DECIMAL                                                                         : SS SAM ROT ROT CDRAW ;                : FOO 14 0 DO 14 0 DO                         SAM I 20 * J 10 * CDRAW             LOOP LOOP ;                                                                   EXIT                                                                                                                                                                                                                                                                                                                              -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ( 17:13)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ( ASCTAB                 <11/ 2/84>260)                                         : GTASK ;                                                                       : GETMODE GMODE C@ ;                                                            CREATE ASCTAB  2048 ALLOT                                                       275 LOAD ( TINY-FONT IS 1498 BYTES )                                            : CMAXX ASCTAB 262 + @ ;                : CMAXY ASCTAB 258 + @ ;                                                        : >COFFSET 2* ASCTAB + ;                                                        : >CDATA >COFFSET @ ASCTAB + 270 + ;                                            -->                                     EXIT                                                                                                                                                                                                                                                                                                   ( 17:13) ( MARGINS !CURSOR        <11/ 2/84>261)                                         VARIABLE LMARG    0  LMARG !            VARIABLE RMARG  279  RMARG !            VARIABLE TMARG    0  TMARG !            VARIABLE BMARG  191  BMARG !                                                    VARIABLE GX      ( CURRENT CHAR )       VARIABLE GY      ( POSITION )                                                   : !CURSOR ( X Y -- ) GY ! GX ! ;        : @CURSOR ( -- X Y ) GX @ GY @ ;                                                : !XY1 ( X1 Y1 -- ) TMARG ! LMARG ! ;                                           : !XY2 ( X2 Y2 -- ) BMARG ! RMARG ! ;                                           : !WINDOW ( X1 Y1 X2 Y2 -- )                  !XY2 !XY1 ;                                                               -->                                     EXIT                                                                                                           (  RLP )   -->                                                           ( <GEMIT>                <11/ 1/84>262)                                         : <GEMIT> ( CH -- )                        DUP >COFFSET @                          IF   >CDATA                                  DUP @CURSOR CDRAW                       C@ CDELX + GX +!                   ELSE DROP THEN ;                                                             -->                                                                             EXIT                                    ( DOES NOT RECOGNIZE CR, LINE FEED, )   ( BACK SPACE, ETC. )                    ( CLIPS AT RIGHT AND BOTTOM OF SCREEN )                                                                                                                                                                                                                                                                                                                                                                           -->                                                           ( GHOME GPAGE CLW        <11/ 2/84>263)                                         : GHOME  LMARG @ TMARG @ !CURSOR ;                                              ( CLEAR WINDOW )                                                                : CLW    GETMODE 2 SETMODE                       LMARG @ RMARG @ SETENDPTS               TMARG @ BMARG @ VLINE                   SETMODE ;                                                              : GPAGE  GHOME CLW ;                                                            -->                                     EXIT                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ( GCR GKEY               <11/ 1/84>264)                                         : KDELAY                                   400 0 DO QTERM IF LEAVE THEN LOOP ;                                          : GCUR   GETMODE 0 SETMODE                       BL >CDATA                               DUP @CURSOR CDRAW  KDELAY               DUP @CURSOR CDRAW  KDELAY               DROP SETMODE ;                                                         : GCR    LMARG @ GX !                            CMAXY CDELY + GY +! ;                                                  : GKEY ( -- CH )                           BEGIN GCUR QTERM UNTIL <KEY> ;                                               -->                                     EXIT                                                                                                                                                                                                                                                                                                            (                        <11/ 1/84>265) -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            (  RLP )                                                                 ( GBKSP GPUTC            <11/ 2/84>266)                                         : GBKSP ( ADDR POS CH -- ADDR POS )           GETMODE >R 2 SETMODE                    DROP DUP 0>                             IF 1- DDUP +                               DUP C@                                  BL ROT C!                               DUP >CDATA C@ CDELX +                      NEGATE GX +!                            GX @ >R                              <GEMIT>                                    R> GX !                           ELSE BEEP THEN                          R> SETMODE ;                                                              : GPUTC ( ADDR POS CH -- ADDR POS )           DUP <GEMIT>                             3 PICK 3 PICK + C! 1+ ;                                                   -->                                     EXIT                                                                                                           (  RLP )                                                                 ( GCTRL GBLANK           <11/ 1/84>267)                                         VARIABLE ?ESCAPE                                                                : GCTRL ( ADDR POS CH -- ADDR POS )           DROP BEEP ;                                                               : GBLANK ( ADDR POS CH -- ADDR POS )          OVER 0>                                 IF GPUTC ELSE GCTRL THEN ;                                                : ?GDONE ( ADDR POS CH -- ADDR POS CH )       DUP 27 =                                IF    OVER 0= DUP ?ESCAPE !             ELSE  DUP 13 =                          THEN ;                                                                    -->                                     EXIT                                                                            : GDIGIT                                                                                                                                                                                                                        ( GEXPECT                <11/ 1/84>268)                                         : GEXPECT ( ADDR COUNT -- )                GHOME                                   DDUP BL FILL ( COUNT ) >R               0  BEGIN                                      GKEY ?GDONE = NOT                    WHILE                                      DUP 8 = OVER 127 = OR                      IF GBKSP  ELSE                       DUP BL <                                   IF GCTRL  ELSE                       OVER R@ < NOT                              IF GCTRL  ELSE                       DUP BL =                                   IF GBLANK ELSE                             GPUTC                             THEN THEN THEN THEN                  REPEAT ( CH ) DROP                   R> DROP DDROP ;                                                              -->                                     EXIT                                                                                                                                            ( GINPUT TEST            <11/ 1/84>269)                                         : GINPUT ( ADDR COUNT -- )                    OVER 1+ OVER GEXPECT                    OVER 1+ SWAP -TRAILING                  ROT C! DROP ;                                                                                                     : TEST   PAGE 0 20 XYTAB ." TEST: "              1HG                                     PAD 12 GINPUT                           PAD COUNT TYPE                          SPACE PAD COUNT . DROP ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ( ASCTAB                 <10/26/84>270) : GTASK ;                               ( : DELAY 0 DO 74 0 DO LOOP LOOP ; )                                              0 CONSTANT LMARGIN                    279 CONSTANT RMARGIN                      0 CONSTANT TMARGIN                    191 CONSTANT BMARGIN                                                            VARIABLE GX      ( CURRENT CHAR )       VARIABLE GY      ( POSITION )                                                   CREATE ASCTAB  2048 ALLOT                                                       ASCTAB CONSTANT >ASCTAB                                                         : CMAXX >ASCTAB 262 + @ ;               : CMAXY >ASCTAB 258 + @ ;                                                       : >COFFSET 2* >ASCTAB + ;                                                       : >CDATA >COFFSET @ >ASCTAB + 270 + ;   -->                                                                    (  RLP )                                                        ( 17:13) ( GEMIT                  <10/15/84>271)                                         : <GEMIT> ( N -- )                         DUP >COFFSET @                          IF   >CDATA                                  DUP GX @ GY @ CDRAW                     C@ CDELX + GX +!                   ELSE DROP THEN ;                                                             : GEMIT <GEMIT> ;                                                               -->                                                                             EXIT                                    ( DOES NOT RECOGNIZE CR, LINE FEED, )   ( BACK SPACE, ETC. )                    ( CLIPS AT RIGHT AND BOTTOM OF SCREEN )                                                                                                                                                                                                                                                                                (  RLP )   -->                                                           ( LARRY'S FONT           <10/19/84>272) : GPAGE 0 PAD C!                        (       GMODE C@ >R 2 SETMODE           (       LMARGIN RMARGIN SETENDPTS       (       TMARGIN BMARGIN VLINE           (       R> SETMODE                      )       LMARGIN GX ! TMARGIN GY ! ;                                             : GCR LMARGIN GX ! CMAXY CDELY + GY +!        0 PAD C! ;                                                                : CBLOT ( CH -- )                             GMODE C@ >R 2 SETMODE                   GX @ >R <GEMIT>                         R> GX ! R> SETMODE ;                                                      : GCUR ( -- )                                 GMODE C@ 0 SETMODE                      32 >CDATA                               DUP GX @ GY @ CDRAW 3 DELAY             DUP GX @ GY @ CDRAW 3 DELAY             DROP SETMODE ;                    -->                                                                    (  RLP )                                                                 ( GRAPHICS TESTS         <10/19/84>273)                                         : <GEMIT2> ( CH -- )                       DUP      13 = IF GCR                    ELSE DUP  8 = IF                           GX @ IF                                    -1 PAD +C! PAD COUNT + C@               DUP >CDATA C@ CDELX +                         NEGATE GX +!                      CBLOT                                ELSE BEEP THEN                       ELSE                                       DUP >CDATA C@ GX @ + 2+                 RMARGIN > IF GCR THEN                   DUP PAD COUNT + C! 1 PAD +C!            DUP <GEMIT>                          THEN THEN DROP ;                                                             -->                                                                                                                                                                                                                                    (  RLP )                                                                 ( GRAPHICS TESTS         <10/15/84>274)                                         : GKEY ( -- CH )                           BEGIN GCUR QTERM UNTIL <KEY>            DUP 47 =                                IF DROP BEEP                               BEGIN GCUR QTERM UNTIL <KEY>            DUP 65 110 WITHIN                       IF 32 + THEN                         THEN ;                                                                       : GECHO                                    PAGE 1HG 0 20 XYTAB                     GPAGE                                   BEGIN                                         GKEY DUP 27 = NOT                 WHILE                                         <GEMIT2>                          REPEAT DROP ;                                                                EXIT                                                                                                                                                                                                                            ( GET FONTS              <10/19/84>275)                                         : TINY-FONT ( 1498 BYTES )                 276 BLOCK ASCTAB        1024 CMOVE      277 BLOCK ASCTAB 1024 +  474 CMOVE      ;                                                                            : LARRY-FONT                               ASCTAB                                  278 BLOCK OVER        1024 CMOVE        279 BLOCK OVER 1024 + 1024 CMOVE        DROP ;                                                                       TINY-FONT FORGET TINY-FONT              EXIT                                                                                                                                                                                                                                                                                                                                                                                                            U]U]U]www3;www3	               
                                                                    % 1 F [ p           *6BNZfr~#/;GS_t1            =IUamy*6BNco{  	             		                   	    	        		l l l l l      	 ~ [ x [~     
	[n 0 XlF     	 6 <  3 s ^     	        	   	   	 3?3    	 ?    	        	         	         	@` 0          	33333   	   	308?   	3003   	 08<60   	?303   	833   	0   	3333   	33>   	        	       	     	        	     	30    	|3[[6     	66c  	3333  	66  	33333  	  	  	6csf<  	333?333  	  	  	33  	  		Go;     	CGO[scC     	6ccc6  	333  	 6 c c s v \     	3333   	303   	?   	333333   	CCf f < <       		;oG     	3333  	CCf <         	?0?   	  nscsn   	;gcg;   	  33   	``nscsn   	  >c?~   	<?   	  nscsn`> 	;gccc   	    	  	33   	   
	    O3333     	  3333  	  333  	  ;gcg;	  nscsn``	    	  >0  	?  	  3333>  	  cc66  
	    3333N     	  33  	  33	  ??  	  	  	  		s               	             	         	@` 0          	        	       	        	     	     	        	     	30    	|3[[6     <=FG (  LI*	mIH`LII%0(F)G  +H&F'G &F'G %" X)Im'F(G)** 4 $H %HFFHGHG `R8` )` H+ ` /R(*IHH+++@` g8 c edc	e*	eANLQT"72)                          472                            # . 9 D O Z e p {             
 +6ALWbmx(3>IT_ju%0;FQ\gr}  	            	         	   	      	 




 	   	  		  	      	  	  	  	    	      	        	        	    	  	  	  	  	
	  	  	  	  	  	  	       	     	  	       	  	   	  	
  	  	  	  	  	  	  	  	  	  			  	  	  	  	  	  		  		  	  	  	  	
  	  	

  	
  	  	         	         	  	  
    	        	      	    	  	    	  	    	  	   	  	   	  			  	  	    	  				  	    	   	   	    	    	  	    	  
  	  
  	  

  	   	    	         	                 	         	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           